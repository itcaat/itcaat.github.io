---
title: "–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Kubernetes –≤ 2025 ‚Äî –ß–∞—Å—Ç—å 5: GitOps, mesh, ingress, RBAC –∏ –æ—Ç–ª–∞–¥–∫–∞ (56‚Äì74)"
date: 2025-12-10T13:45:00+03:00
description: "–°–µ—Ä–∏—è –∑–∞–º–µ—Ç–æ–∫: –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Kubernetes –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∂–∏–≤–æ–π —Å—Ç–∞—Ç—å–∏. –≠—Ç–∞ —á–∞—Å—Ç—å ‚Äî –æ–¥–Ω–∞ –∏–∑ –≥–ª–∞–≤; –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –∫–æ–º–∞–Ω–¥—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."
thumbnail: "images/image.png"
tags: [sre, kubernetes]
draft: true
---

–í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç Kubernetes –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å ‚Äú–ø–ª–æ—â–∞–¥–∫–æ–π –¥–ª—è –¥–µ–ø–ª–æ—è‚Äù –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π. –ò —Ç—É—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∑—Ä–æ—Å–ª–∞—è –∂–∏–∑–Ω—å: GitOps, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞, ingress, mTLS, RBAC ‚Äî –∏, –∫–æ–Ω–µ—á–Ω–æ, –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π —Å–ø–∞—Å–∞–µ—Ç, –∫–æ–≥–¥–∞ ‚Äú–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ‚Äù.

–ß–∞—Å—Ç—å 5 ‚Äî –ø—Ä–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—É—é –∫—É–ª—å—Ç—É—Ä—É: –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Git (–∞ –Ω–µ —á–µ—Ä–µ–∑ —á–∞—Ç–∏–∫), –∫–æ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–µ–Ω service mesh, –∫–∞–∫ –Ω–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å ingress –≤ –º–∞–≥–∏—á–µ—Å–∫–∏–π —á—ë—Ä–Ω—ã–π —è—â–∏–∫, –∏ –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø—ã/–æ—Ç–ª–∞–¥–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ä–∞–±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–µ –¥—Ä–∞–ª–∏—Å—å –Ω–∞—Å–º–µ—Ä—Ç—å.

**–°–µ—Ä–∏—è:** –ß–∞—Å—Ç—å 5 –∏–∑ 6. (–°—Å—ã–ª–∫–∏ –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è.)

### –í —ç—Ç–æ–π —á–∞—Å—Ç–∏
- 56. –†–µ–∞–ª–∏–∑—É–π—Ç–µ GitOps —Å ArgoCD
- 57. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FluxCD –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏
- 58. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Mesh
- 59. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Istio Virtual Service
- 60. –í–∫–ª—é—á–∏—Ç–µ mTLS —Å Istio
- 61. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx Ingress Controller
- 62. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π TLS —Å cert-manager
- 63. Rate Limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- 64. –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—É –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- 65. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Service Account –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- 66. –í–∫–ª—é—á–∏—Ç–µ –∞—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- 67. –ü–æ–Ω–∏–º–∞–Ω–∏–µ QoS –∫–ª–∞—Å—Å–æ–≤
- 68. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ü–µ–ª—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- 69. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- 70. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- 71. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ kubectl debug —Å Ephemeral Containers
- 72. –°—Ç—Ä–∏–º–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Pod'–æ–≤
- 73. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏
- 74. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stern –∏ kubectl –ø–ª–∞–≥–∏–Ω—ã

### 56. –†–µ–∞–ª–∏–∑—É–π—Ç–µ GitOps —Å ArgoCD

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** GitOps –¥–µ–ª–∞–µ—Ç –¥–µ–ø–ª–æ–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ–º—ã–º: Git –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ü–æ—è–≤–∏—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥-–¥—Ä–∏—Ñ—Ç –∏ —Ä—É—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è; –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ —Å—Ç–∞–Ω–µ—Ç –∫–≤–µ—Å—Ç–æ–º.

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-application
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/myorg/k8s-manifests
    targetRevision: main
    path: applications/production
  destination:
    server: https://kubernetes.default.svc
    namespace: production
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
    retry:
      limit: 5
      backoff:
        duration: 5s
        factor: 2
        maxDuration: 3m
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ GitOps:**

* –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –≤ Git
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—Ä–µ–π—Ñ–∞
* –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç–∫–∞—Ç—ã —á–µ—Ä–µ–∑ Git revert
* –ê—É–¥–∏—Ç-–ª–æ–≥ —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—Ä–∏—é Git
### 57. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FluxCD –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** Progressive delivery —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —Ä–µ–ª–∏–∑–∞: –≤—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ –¥–æ–ª—é —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ ¬´–≤–∫–∞—Ç–∏–ª–∏ –Ω–∞ –≤—Å–µ—Ö –∏ –º–æ–ª–∏–º—Å—è¬ª –±—É–¥—É—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –º–∞—Å—Å–æ–≤—ã–º –æ—Ç–∫–∞—Ç–∞–º –∏ –ø—Ä–æ—Å—Ç–æ—è–º.

```yaml
apiVersion: flagger.app/v1beta1
kind: Canary
metadata:
  name: api-server
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: api-server
  service:
    port: 8080
  analysis:
    interval: 1m
    threshold: 5
    maxWeight: 50
    stepWeight: 10
    metrics:
    - name: request-success-rate
      thresholdRange:
        min: 99
      interval: 1m
    - name: request-duration
      thresholdRange:
        max: 500
      interval: 1m
```

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Service Mesh
------------------------
### 58. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Mesh

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** Mesh –æ–ø—Ä–∞–≤–¥–∞–Ω, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –µ–¥–∏–Ω—ã–π mTLS/traffic policy/observability –±–µ–∑ –ø—Ä–∞–≤–æ–∫ –∫–æ–¥–∞.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ü–æ—Å—Ç–∞–≤–∏—Ç–µ mesh ¬´—Ä–∞–¥–∏ –º–æ–¥—ã¬ª ‚Äî –ø–æ–ª—É—á–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å/–æ–≤–µ—Ä—Ö–µ–¥. –ù–µ –ø–æ—Å—Ç–∞–≤–∏—Ç–µ –ø—Ä–∏ –Ω—É–∂–¥–µ ‚Äî –±—É–¥–µ—Ç–µ —Å—Ç—Ä–∞–¥–∞—Ç—å –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç—Ä–∞—Ñ–∏–∫–∞.

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ service mesh –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ:**

* Mutual TLS –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
* –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–æ–º (canary, A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
* –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
* Circuit breaking –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
* –î–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ service mesh –µ—Å–ª–∏:**

* –£ –≤–∞—Å < 20 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
* –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–≥–æ ingress –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
* –ö–æ–º–∞–Ω–¥–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –≤ service mesh
* –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º—ã
### 59. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Istio Virtual Service

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** VirtualService/traffic routing ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –∫–∞–Ω–∞—Ä–µ–µ–∫/A-B/–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ L7.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –¢—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –≥—Ä—É–±–æ; –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–π —Å—Ç–∞–Ω—É—Ç —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–µ–µ –∏ –º–µ–Ω–µ–µ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º–∏.

```yaml
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: api-routes
spec:
  hosts:
  - api.example.com
  http:
  - match:
    - headers:
        canary:
          exact: "true"
    route:
    - destination:
        host: api-server
        subset: v2
      weight: 100
  - route:
    - destination:
        host: api-server
        subset: v1
      weight: 90
    - destination:
        host: api-server
        subset: v2
      weight: 10
```
### 60. –í–∫–ª—é—á–∏—Ç–µ mTLS —Å Istio

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** mTLS —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞/–ø–æ–¥–º–µ–Ω—ã —Ç—Ä–∞—Ñ–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –í–Ω—É—Ç—Ä–∏–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ —Å—Ç–∞–Ω–µ—Ç –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –∏ —ç—Ç–æ –ø–ª–æ—Ö–æ –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

```yaml
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: production
spec:
  mtls:
    mode: STRICT
---
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: api-authz
  namespace: production
spec:
  selector:
    matchLabels:
      app: api-server
  action: ALLOW
  rules:
  - from:
    - source:
        principals: ["cluster.local/ns/production/sa/frontend"]
```

Ingress –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø
-------------------------------------
### 61. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx Ingress Controller

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** Ingress ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏–º HTTP(S) –¥–æ—Å—Ç—É–ø–æ–º.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞—á–Ω—ë—Ç –≤—ã–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è ¬´–∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—Å—è¬ª (NodePort/LoadBalancer), –ø–æ—è–≤–∏—Ç—Å—è —Ö–∞–æ—Å –∏ –¥—ã—Ä—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  tls:
  - hosts:
    - app.example.com
    secretName: app-tls-cert
  rules:
  - host: app.example.com
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: api-server
            port:
              number: 8080
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend
            port:
              number: 80
```
### 62. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π TLS —Å cert-manager

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** cert-manager –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç TLS –∏ —É–±–∏—Ä–∞–µ—Ç —Ä—É—á–Ω–æ–π –∞–¥ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –°–µ—Ä—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Ç—É—Ö–∞—Ç—å, –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è —Ä—É–∫–∞–º–∏ –∏ –ª–æ–º–∞—Ç—å –ø—Ä–æ–¥ ¬´–≤–Ω–µ–∑–∞–ø–Ω–æ¬ª, –æ–±—ã—á–Ω–æ –Ω–æ—á—å—é/–≤ –≤—ã—Ö–æ–¥–Ω—ã–µ.

```yaml
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
    email: admin@example.com
    privateKeySecretRef:
      name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: nginx
```
### 63. Rate Limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** Rate limiting –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤—Å–ø–ª–µ—Å–∫–æ–≤, –±–æ—Ç–æ–≤ –∏ —á–∞—Å—Ç–∏—á–Ω–æ –æ—Ç DDoS –Ω–∞ —É—Ä–æ–≤–Ω–µ ingress.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –û–¥–Ω–∞ –≥–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞/–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª–æ–∂–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∏–ª–∏ –≤—ã–∂–µ—á—å —Ä–µ—Å—É—Ä—Å—ã –¥–æ –æ—Ç–∫–∞–∑–∞.

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: protected-api
  annotations:
    nginx.ingress.kubernetes.io/limit-rps: "10"
    nginx.ingress.kubernetes.io/limit-connections: "5"
    nginx.ingress.kubernetes.io/limit-burst-multiplier: "2"
spec:
  rules:
  - host: api.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: api-server
            port:
              number: 8080
```

RBAC –∏ Service Accounts
------------------------
### 64. –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—É –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** Least privilege —Å–Ω–∏–∂–∞–µ—Ç —É—â–µ—Ä–± –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –õ—é–±–æ–π Pod —Å –ª–∏—à–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ —Å—Ç–∞–Ω–µ—Ç ¬´–∞–¥–º–∏–Ω–æ–º¬ª –∏ —Å–º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å/–º–µ–Ω—è—Ç—å —Ç–æ, —á—Ç–æ –µ–º—É –Ω–µ –ø–æ–ª–æ–∂–µ–Ω–æ.

```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: api-server-sa
  namespace: production
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: api-server-role
  namespace: production
rules:
- apiGroups: [""]
  resources: ["configmaps"]
  resourceNames: ["app-config"]
  verbs: ["get", "list"]
- apiGroups: [""]
  resources: ["secrets"]
  resourceNames: ["db-credentials"]
  verbs: ["get"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: api-server-binding
  namespace: production
subjects:
- kind: ServiceAccount
  name: api-server-sa
  namespace: production
roleRef:
  kind: Role
  name: api-server-role
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-server
spec:
  template:
    spec:
      serviceAccountName: api-server-sa
      automountServiceAccountToken: false  # –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
```
### 65. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Service Account –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –ê–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SA token –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–∞—Å—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∏—Å–∫.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –¢–æ–∫–µ–Ω –æ–∫–∞–∂–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Pod‚Äô–æ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: —É—Ç–µ—á–∫–∞ ‚Äî –∏ —É –∞—Ç–∞–∫—É—é—â–µ–≥–æ –µ—Å—Ç—å –∫–ª—é—á –∫ API.

```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: default
  namespace: production
automountServiceAccountToken: false
```

**–ü–æ—á–µ–º—É:** Pod'–∞–º –Ω–µ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ Kubernetes API –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - —ç—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏.
### 66. –í–∫–ª—é—á–∏—Ç–µ –∞—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** Audit logs –¥–∞—é—Ç —Ä–∞—Å—Å–ª–µ–¥—É–µ–º–æ—Å—Ç—å: –∫—Ç–æ/—á—Ç–æ/–∫–æ–≥–¥–∞ –¥–µ–ª–∞–ª –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ü–æ—Å–ª–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –Ω–µ—á–µ–º –¥–æ–∫–∞–∑–∞—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ø–æ—á–∫—É —Å–æ–±—ã—Ç–∏–π; blame –±—É–¥–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å —Ñ–∞–∫—Ç—ã.

```yaml
# /etc/kubernetes/audit-policy.yaml
apiVersion: audit.k8s.io/v1
kind: Policy
rules:
- level: Metadata
  omitStages:
  - RequestReceived
  resources:
  - group: ""
    resources: ["secrets", "configmaps"]
- level: Request
  verbs: ["create", "update", "patch", "delete"]
  resources:
  - group: "apps"
    resources: ["deployments", "statefulsets"]
```

–ö–ª–∞—Å—Å—ã –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (QoS)
-----------------------------------
### 67. –ü–æ–Ω–∏–º–∞–Ω–∏–µ QoS –∫–ª–∞—Å—Å–æ–≤

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** QoS –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –∫–æ–≥–æ –≤—ã—Å–µ–ª—è—Ç –ø–µ—Ä–≤—ã–º –ø—Ä–∏ –¥–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞ –Ω–æ–¥—É.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ë–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è QoS –≤–∞—à–∏ –≤–∞–∂–Ω—ã–µ Pod‚Äô—ã –º–æ–≥—É—Ç —É–º–∏—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–º–∏, –∞ ¬´–º—É—Å–æ—Ä–Ω—ã–µ¬ª ‚Äî –∂–∏—Ç—å –¥–æ–ª—å—à–µ.

**Guaranteed (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

```yaml
resources:
  requests:
    memory: "256Mi"
    cpu: "500m"
  limits:
    memory: "256Mi"  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–≤–µ–Ω request
    cpu: "500m"      # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–≤–µ–Ω request
```

**Burstable (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

```yaml
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"  # –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç request
    cpu: "500m"
```

**BestEffort (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

```yaml
# –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã requests –∏–ª–∏ limits
```

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã—Å–µ–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –Ω–æ–¥–µ:** BestEffort ‚Üí Burstable ‚Üí Guaranteed

kubectl —Å–æ–≤–µ—Ç—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
-------------------------------------------
### 68. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ü–µ–ª—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ apply –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —É–ø—Ä–æ—â–∞–µ—Ç GitOps/—Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É —Å–æ–∑–¥–∞—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ—Ä—è–¥–∫–∞ –∏ –ø—Ä–æ–ø—É—Å–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
kubectl apply -f ./kubernetes/ --recursive

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ server-side apply –¥–ª—è –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
kubectl apply -f ./kubernetes/ --server-side

# –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
kubectl diff -f ./kubernetes/
```
### 69. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å ¬´–∫–∞–∫ —Å–µ–π—á–∞—Å¬ª –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Git.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ä–∞–∑—ä–µ–¥–µ—Ç—Å—è; –ø—Ä–∞–≤–∫–∏ –±—É–¥—É—Ç —Ç–µ—Ä—è—Ç—å—Å—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å.

```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π deployment –∫–∞–∫ YAML
kubectl get deployment nginx -o yaml > nginx-deployment.yaml

# –°–æ–∑–¥–∞—Ç—å deployment –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ, –∑–∞—Ç–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
kubectl create deployment nginx --image=nginx --dry-run=client -o yaml > deployment.yaml

```
### 70. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ apply –ª–æ–≤–∏—Ç –æ—à–∏–±–∫–∏ –µ—â—ë –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ —Å—Ç–∞–Ω—É—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–º.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –û—à–∏–±–∫–∏ —Å—Ö–µ–º/–≤–µ—Ä—Å–∏–π/–ø–æ–ª–µ–π –ø–æ–ø–∞–¥—É—Ç –≤ –ø—Ä–æ–¥–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –∏ –±—É–¥—É—Ç –≤—Å–ø–ª—ã–≤–∞—Ç—å –≤ —Å–∞–º—ã–π –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–æ–º–µ–Ω—Ç.

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è dry-run (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
kubectl apply -f deployment.yaml --dry-run=server

# –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
kubectl apply -f deployment.yaml --dry-run=client

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å kubeconform (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –∑–∞–º–µ–Ω–∞ kubeval)
kubeconform -strict deployment.yaml

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
kubeconform -strict -summary -output json deployment.yaml

# –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
kubeconform -strict kubernetes/

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π Kubernetes
kubeconform -kubernetes-version 1.28.0 deployment.yaml

# –í–∞–ª–∏–¥–∞—Ü–∏—è CRD (Custom Resource Definitions)
kubeconform -schema-location default \
  -schema-location 'https://raw.githubusercontent.com/datreeio/CRDs-catalog/main/{{.Group}}/{{.ResourceKind}}_{{.ResourceAPIVersion}}.json' \
  custom-resource.yaml

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ö–µ–º—ã (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è CRD)
kubeconform -ignore-missing-schemas deployment.yaml

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤
kubeconform -reject-kinds Service,ConfigMap deployment.yaml
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ kubeconform:**
- üöÄ –í 10-20 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ kubeval
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (kubeval –∑–∞–±—Ä–æ—à–µ–Ω —Å 2021)
- üì¶ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CRD –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üéØ –õ—É—á—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏
----------------------------
### 71. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ kubectl debug —Å Ephemeral Containers

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** kubectl debug —Å–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, –∫–æ–≥–¥–∞ –æ–±—ã—á–Ω–æ–≥–æ exec –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –û—Ç–ª–∞–¥–∫–∞ —Å—Ç–∞–Ω–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ–π –∏ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–π: –ø—Ä–∏–¥—ë—Ç—Å—è –º–µ–Ω—è—Ç—å –æ–±—Ä–∞–∑/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å Pod‚Äô—ã —Ä–∞–¥–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

```bash
# –û—Ç–ª–∞–¥–∫–∞ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ pod'–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
kubectl debug -it api-pod-xyz \
  --image=nicolaka/netshoot \
  --target=api \
  --share-processes

# –í–Ω—É—Ç—Ä–∏ debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—ã –º–æ–∂–µ—Ç–µ:
# - –ò–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å (netstat, tcpdump)
# - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã (ps, top)
# - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (curl, ping)
# - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

# –û—Ç–ª–∞–¥–∫–∞ –Ω–æ–¥—ã –Ω–∞–ø—Ä—è–º—É—é
kubectl debug node/worker-node-1 -it --image=ubuntu

# –°–æ–∑–¥–∞—Ç—å debug –∫–æ–ø–∏—é pod'–∞ —Å –¥—Ä—É–≥–∏–º –æ–±—Ä–∞–∑–æ–º
kubectl debug api-pod-xyz -it \
  --copy-to=debug-api \
  --container=api \
  --image=myapp:debug-version
```
### 72. –°—Ç—Ä–∏–º–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Pod'–æ–≤

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –°—Ç—Ä–∏–º–∏–Ω–≥ –ª–æ–≥–æ–≤ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É Pod‚Äô–æ–≤ –Ω—É–∂–µ–Ω –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞, –∞ –Ω–µ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ Pod‚Äô–∞.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ë—É–¥–µ—Ç–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ ¬´–Ω–µ —Ç–æ–≥–æ¬ª Pod‚Äô–∞ –∏ —Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ rollout/hpa.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å stern –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –ª–æ–≥–æ–≤
brew install stern

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö pod'–æ–≤ —Å –º–µ—Ç–∫–æ–π
stern -l app=api-server

# –í–∫–ª—é—á–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏ –∏–º–µ–Ω–∞ pod'–æ–≤
stern -l app=api-server -t --tail 50

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ —Å grep
stern api-server --exclude-container=istio-proxy | grep ERROR

# –ù–µ—Å–∫–æ–ª—å–∫–æ namespaces
stern api-server --all-namespaces
```
### 73. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –¥–∞—é—Ç –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã: —Å–µ—Ç—å, —Å–æ–±—ã—Ç–∏—è, —Ä–µ—Å—É—Ä—Å—ã.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –±—É–¥—É—Ç —Ä–µ—à–∞—Ç—å—Å—è –¥–æ–ª—å—à–µ, –∞ —á–∞—Å—Ç—å –ø—Ä–æ–±–ª–µ–º –æ—Å—Ç–∞–Ω–µ—Ç—Å—è ¬´–º–∞–≥–∏–µ–π¬ª, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –±—ã–ª–æ –¥–∞–Ω–Ω—ã—Ö.

```bash
# Port forward –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
kubectl port-forward svc/api-server 8080:80

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–º pod'–µ
kubectl exec -it pod-name -- /bin/bash

# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑/–≤ pod
kubectl cp pod-name:/var/log/app.log ./app.log
kubectl cp ./config.yaml pod-name:/etc/config/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
kubectl get events --sort-by='.lastTimestamp' -A

# –û–ø–∏—Å–∞—Ç—å —Ä–µ—Å—É—Ä—Å –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
kubectl describe pod api-pod-xyz

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl top pods
kubectl top nodes
```
### 74. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stern –∏ kubectl –ø–ª–∞–≥–∏–Ω—ã

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –ü–ª–∞–≥–∏–Ω—ã –∏ stern ‚Äî —É—Å–∫–æ—Ä–∏—Ç–µ–ª–∏ —Ä—É—Ç–∏–Ω—ã: –º–µ–Ω—å—à–µ —Ä—É—á–Ω–æ–≥–æ —Ç—Ä—É–¥–∞, –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫.

**–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å:** –ë—É–¥–µ—Ç–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —á–∞—â–µ –æ—à–∏–±–∞—Ç—å—Å—è –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å kubectl –ø–ª–∞–≥–∏–Ω—ã
kubectl krew install tail
kubectl krew install debug-shell
kubectl krew install resource-capacity

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å resource-capacity –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl resource-capacity --pods --util

# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è pod'–æ–≤
kubectl get pods --field-selector status.phase=Running
kubectl get pods --field-selector spec.nodeName=node-1
```

