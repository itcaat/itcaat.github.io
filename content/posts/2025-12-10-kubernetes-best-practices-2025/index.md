---
title: "–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Kubernetes –≤ 2025"
date: 2025-12-10T13:39:35+03:00
description: "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Kubernetes ‚Äî —ç—Ç–æ –∫–∞–∫ –∏–≥—Ä–∞ –≤ —Ä—É—Å—Å–∫—É—é —Ä—É–ª–µ—Ç–∫—É —Å YAML-—Ñ–∞–π–ª–∞–º–∏. –û–¥–∏–Ω –ª–∏—à–Ω–∏–π –ø—Ä–æ–±–µ–ª –≤–º–µ—Å—Ç–æ —Ç–∞–±–∞, –∑–∞–±—ã—Ç–∞—è –±—É–∫–≤–∞ –≤ –≤–µ—Ä—Å–∏–∏ API, –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª—ë–Ω–Ω–∞—è –º–µ—Ç–∫–∞ ‚Äî –∏ –≤—É–∞–ª—è, –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–µ–∂–∏—Ç –º—ë—Ä—Ç–≤—ã–º –≥—Ä—É–∑–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –∞ –≤—ã —Å—É–¥–æ—Ä–æ–∂–Ω–æ –ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–æ–Ω—è—Ç—å –≤ —á–µ–º –¥–µ–ª–æ. "
thumbnail: "images/main.png"
tags: [sre, kubernetes]
---

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Kubernetes ‚Äî —ç—Ç–æ –∫–∞–∫ –∏–≥—Ä–∞ –≤ —Ä—É—Å—Å–∫—É—é —Ä—É–ª–µ—Ç–∫—É —Å YAML-—Ñ–∞–π–ª–∞–º–∏. –û–¥–∏–Ω –ª–∏—à–Ω–∏–π –ø—Ä–æ–±–µ–ª –≤–º–µ—Å—Ç–æ —Ç–∞–±–∞, –∑–∞–±—ã—Ç–∞—è –±—É–∫–≤–∞ –≤ –≤–µ—Ä—Å–∏–∏ API, –∏–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª—ë–Ω–Ω–∞—è –º–µ—Ç–∫–∞ ‚Äî –∏ –≤—É–∞–ª—è, –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–µ–∂–∏—Ç –º—ë—Ä—Ç–≤—ã–º –≥—Ä—É–∑–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –∞ –≤—ã —Å—É–¥–æ—Ä–æ–∂–Ω–æ –ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–æ–Ω—è—Ç—å –≤ —á–µ–º –¥–µ–ª–æ. 

![Chaos vs Stability](images/main.png)

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è –¥–ª—è –≤–∞—Å —Å–æ–±—Ä–∞–ª –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –≤ –±–æ–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø—Ä–∞–∫—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º —Å–ø–∞—Ç—å —Å–ø–æ–∫–æ–π–Ω–æ (–∏–ª–∏ —Ö–æ—Ç—è –±—ã —Ä–µ–∂–µ –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –æ—Ç –∑–≤–æ–Ω–∫–æ–≤ on-call). –ù–µ–≤–∞–∂–Ω–æ, –Ω–æ–≤–∏—á–æ–∫ –≤—ã, –≥–µ—Ä–æ–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—â–∏–π —Å–≤–æ–π –ø–µ—Ä–≤—ã–π Pod, –∏–ª–∏ –±—ã–≤–∞–ª—ã–π –∫–ª–∞—Å—Ç–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å —Ç—ã—Å—è—á–µ–π yards stare ‚Äî —ç—Ç–∏ —Å–æ–≤–µ—Ç—ã –ø—Ä–∏–≥–æ–¥—è—Ç—Å—è –≤—Å–µ–º.

## üìö –û—Å–Ω–æ–≤—ã

### –û–±—â–∏–µ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Kubernetes
- [1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é API](#1-–≤—Å–µ–≥–¥–∞-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–∞–∫—Ç—É–∞–ª—å–Ω—É—é-—Å—Ç–∞–±–∏–ª—å–Ω—É—é-–≤–µ—Ä—Å–∏—é-api)
- [2. –•—Ä–∞–Ω–∏—Ç–µ –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π](#2-—Ö—Ä–∞–Ω–∏—Ç–µ-–≤—Å—é-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é-–≤-—Å–∏—Å—Ç–µ–º–µ-–∫–æ–Ω—Ç—Ä–æ–ª—è-–≤–µ—Ä—Å–∏–π)
- [3. –°–æ–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø DRY —Å Kustomize –∏–ª–∏ Helm](#3-—Å–æ–±–ª—é–¥–∞–π—Ç–µ-–ø—Ä–∏–Ω—Ü–∏–ø-dry-—Å-kustomize-–∏–ª–∏-helm)
- [4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Namespaces –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è](#4-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-namespaces-–¥–ª—è-–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ-—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è)

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è YAML
- [5. –ü–∏—à–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ YAML, –∞ –Ω–µ JSON](#5-–ø–∏—à–∏—Ç–µ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é-–≤-yaml-–∞-–Ω–µ-json)
- [6. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è –≤ YAML](#6-–ø—Ä–∞–≤–∏–ª—å–Ω–æ-–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ-–±—É–ª–µ–≤—ã-–∑–Ω–∞—á–µ–Ω–∏—è-–≤-yaml)
- [7. –î–µ—Ä–∂–∏—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏](#7-–¥–µ—Ä–∂–∏—Ç–µ-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã-–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏)
- [8. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ](#8-–≥—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ-—Å–≤—è–∑–∞–Ω–Ω—ã–µ-–æ–±—ä–µ–∫—Ç—ã-–≤-–æ–¥–Ω–æ–º-—Ñ–∞–π–ª–µ)

## üöÄ Workloads –∏ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Pod –∏ Workloads
- [9. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ–ª—ã–µ Pod'—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ](#9-–Ω–∏–∫–æ–≥–¥–∞-–Ω–µ-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–≥–æ–ª—ã–µ-pod—ã-–≤-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- [10. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Deployments –¥–ª—è stateless –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#10-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-deployments-–¥–ª—è-stateless-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
- [11. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Jobs –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á](#11-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-jobs-–¥–ª—è-–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö-–∑–∞–¥–∞—á)
- [12. –í—Å–µ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏](#12-–≤—Å–µ–≥–¥–∞-–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ-–ø—Ä–æ–≤–µ—Ä–∫–∏-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Deployment
- [13. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ Rolling Updates](#13-–ø—Ä–∞–≤–∏–ª—å–Ω–æ-–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ-rolling-updates)
- [14. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pod Disruption Budgets (PDB)](#14-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-pod-disruption-budgets-pdb)
- [15. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Pod Anti-Affinity –¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏](#15-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-pod-anti-affinity-–¥–ª—è-–≤—ã—Å–æ–∫–æ–π-–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)

## üåê –°–µ—Ç–∏ –∏ –°–µ—Ä–≤–∏—Å—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Service –∏ —Å–µ—Ç–µ–π
- [16. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ Services –ø–µ—Ä–µ–¥ –∑–∞–≤–∏—Å–∏–º—ã–º–∏ Workloads](#16-—Å–æ–∑–¥–∞–≤–∞–π—Ç–µ-services-–ø–µ—Ä–µ–¥-–∑–∞–≤–∏—Å–∏–º—ã–º–∏-workloads)
- [17. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DNS –¥–ª—è Service Discovery](#17-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-dns-–¥–ª—è-service-discovery)
- [18. –ò–∑–±–µ–≥–∞–π—Ç–µ hostPort –∏ hostNetwork](#18-–∏–∑–±–µ–≥–∞–π—Ç–µ-hostport-–∏-hostnetwork)
- [19. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Headless Services –¥–ª—è StatefulSet Discovery](#19-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-headless-services-–¥–ª—è-statefulset-discovery)

### Ingress –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø
- [61. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx Ingress Controller](#61-–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ-nginx-ingress-controller)
- [62. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π TLS —Å cert-manager](#62-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π-tls-—Å-cert-manager)
- [63. Rate Limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS](#63-rate-limiting-–∏-–∑–∞—â–∏—Ç–∞-–æ—Ç-ddos)

## üè∑Ô∏è –ú–µ—Ç–∫–∏ –∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–µ—Ç–∫–∏, —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
- [20. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ](#20-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ-–º–µ—Ç–∫–∏-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- [21. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–µ–ª–µ–∫—Ü–∏–∏ –ø–æ –º–µ—Ç–∫–∞–º](#21-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-—Å–µ–ª–µ–∫—Ü–∏–∏-–ø–æ-–º–µ—Ç–∫–∞–º)
- [22. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö](#22-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏-–¥–ª—è-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
- [23. –û—Ç–ª–∞–¥–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –º–µ—Ç–∫–∞–º–∏](#23-–æ—Ç–ª–∞–¥–∫–∞-—Å-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º-–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏-–º–µ—Ç–∫–∞–º–∏)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ConfigMaps –∏ Secrets
- [24. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ConfigMaps –¥–ª—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#24-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-configmaps-–¥–ª—è-–Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- [25. –ë–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å Secrets](#25-–±–µ–∑–æ–ø–∞—Å–Ω–æ-—Ä–∞–±–æ—Ç–∞–π—Ç–µ-—Å-secrets)

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [79. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#79-–ø–æ–Ω–∏–º–∞–Ω–∏–µ-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [80. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ ConfigMaps –∏ Secrets](#80-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ-configmaps-–∏-secrets)
- [81. –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Pod –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ConfigMap](#81-—Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç–µ-–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫-pod-–ø—Ä–∏-–∏–∑–º–µ–Ω–µ–Ω–∏–∏-configmap)

## üíæ –†–µ—Å—É—Ä—Å—ã –∏ –•—Ä–∞–Ω–∏–ª–∏—â–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –ª–∏–º–∏—Ç—ã
- [26. –í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤](#26-–≤—Å–µ–≥–¥–∞-—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ-–∑–∞–ø—Ä–æ—Å—ã-–∏-–ª–∏–º–∏—Ç—ã-—Ä–µ—Å—É—Ä—Å–æ–≤)
- [27. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ResourceQuotas –¥–ª—è –ª–∏–º–∏—Ç–æ–≤ namespace](#27-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-resourcequotas-–¥–ª—è-–ª–∏–º–∏—Ç–æ–≤-namespace)
- [28. –†–µ–∞–ª–∏–∑—É–π—Ç–µ LimitRanges –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é](#28-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-limitranges-–¥–ª—è-–∑–Ω–∞—á–µ–Ω–∏–π-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)

### –ö–ª–∞—Å—Å—ã –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (QoS)
- [67. –ü–æ–Ω–∏–º–∞–Ω–∏–µ QoS –∫–ª–∞—Å—Å–æ–≤](#67-–ø–æ–Ω–∏–º–∞–Ω–∏–µ-qos-–∫–ª–∞—Å—Å–æ–≤)

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- [46. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PersistentVolumes –¥–ª—è stateful –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#46-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-persistentvolumes-–¥–ª—è-stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
- [47. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ StorageClasses –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#47-–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ-storageclasses-–¥–ª—è-—Ä–∞–∑–Ω—ã—Ö-—É—Ä–æ–≤–Ω–µ–π-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- [48. –í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Volume](#48-–≤–∫–ª—é—á–∏—Ç–µ-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-volume)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [29. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –æ—Ç root](#29-–∑–∞–ø—É—Å–∫–∞–π—Ç–µ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã-–Ω–µ-–æ—Ç-root)
- [30. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Network Policies](#30-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-network-policies)
- [31. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pod Security Standards (PSS) –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö PSP](#31-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-pod-security-standards-pss-–≤–º–µ—Å—Ç–æ-—É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö-psp)

### RBAC –∏ Service Accounts
- [64. –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—É –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π](#64-—Å–ª–µ–¥—É–π—Ç–µ-–ø—Ä–∏–Ω—Ü–∏–ø—É-–º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö-–ø—Ä–∏–≤–∏–ª–µ–≥–∏–π)
- [65. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Service Account –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é](#65-–æ—Ç–∫–ª—é—á–∏—Ç–µ-–∞–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-service-account-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
- [66. –í–∫–ª—é—á–∏—Ç–µ –∞—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#66-–≤–∫–ª—é—á–∏—Ç–µ-–∞—É–¥–∏—Ç-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

### Admission Controllers –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫
- [85. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ OPA Gatekeeper –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫](#85-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-opa-gatekeeper-–¥–ª—è-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è-–ø–æ–ª–∏—Ç–∏–∫)
- [86. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Validating Webhooks](#86-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-validating-webhooks)
- [87. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Mutating Webhooks –¥–ª—è –∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#87-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-mutating-webhooks-–¥–ª—è-–∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- [88. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Kyverno –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–ª–∏—Ç–∏–∫](#88-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞-kyverno-–¥–ª—è-–ø—Ä–æ—Å—Ç—ã—Ö-–ø–æ–ª–∏—Ç–∏–∫)

## üñºÔ∏è –û–±—Ä–∞–∑—ã –∏ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑–∞–º–∏
- [38. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞](#38-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–¥–∞–π–¥–∂–µ—Å—Ç—ã-–æ–±—Ä–∞–∑–æ–≤-–¥–ª—è-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
- [39. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ imagePullPolicy](#39-–ø—Ä–∞–≤–∏–ª—å–Ω–æ-–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ-imagepullpolicy)
- [40. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–µ—Å—Ç—Ä–∞—Ö](#40-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é-–≤-–ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö-—Ä–µ–µ—Å—Ç—Ä–∞—Ö)
- [41. –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑—ã –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏](#41-—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ-–æ–±—Ä–∞–∑—ã-–Ω–∞-—É—è–∑–≤–∏–º–æ—Å—Ç–∏)

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- [53. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Init Containers –¥–ª—è –∑–∞–¥–∞—á –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](#53-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-init-containers-–¥–ª—è-–∑–∞–¥–∞—á-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- [54. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω Sidecar](#54-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-–ø–∞—Ç—Ç–µ—Ä–Ω-sidecar)
- [55. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ephemeral Containers –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏](#55-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-ephemeral-containers-–¥–ª—è-–æ—Ç–ª–∞–¥–∫–∏)

### –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ Lifecycle Hooks
- [82. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ postStart Hooks –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏](#82-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-poststart-hooks-–¥–ª—è-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
- [83. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã preStop Hook](#83-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã-prestop-hook)
- [84. –ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ Hooks —Å Probes](#84-–∫–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ-hooks-—Å-probes)

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª

### Graceful Shutdown –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- [35. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è](#35-–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ-–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π-–ø–µ—Ä–∏–æ–¥-–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)
- [36. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ SIGTERM –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏](#36-–ø—Ä–∞–≤–∏–ª—å–Ω–æ-–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ-sigterm-–≤-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
- [37. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –¥—Ä–µ–Ω–∞–∂ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π](#37-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-–¥—Ä–µ–Ω–∞–∂-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- [93. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#93-–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ-–ø—Ä–æ–≤–µ—Ä–∫–∏-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏-–¥–ª—è-—Ä–∞–∑–Ω—ã—Ö-—Ç–∏–ø–æ–≤-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
- [94. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Startup Probes –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#94-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-startup-probes-–¥–ª—è-–º–µ–¥–ª–µ–Ω–Ω—ã—Ö-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
- [95. –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏](#95-–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏-–ø—Ä–æ–≤–µ—Ä–æ–∫-—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- [42. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Horizontal Pod Autoscaler (HPA)](#42-–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ-horizontal-pod-autoscaler-hpa)
- [43. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è HPA](#43-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-–∫–∞—Å—Ç–æ–º–Ω—ã–µ-–º–µ—Ç—Ä–∏–∫–∏-–¥–ª—è-hpa)
- [44. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ Vertical Pod Autoscaler (VPA)](#44-—Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ-vertical-pod-autoscaler-vpa)
- [45. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ KEDA –¥–ª—è event-driven –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è](#45-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-keda-–¥–ª—è-event-driven-–∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- [49. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Node Affinity –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è workloads](#49-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-node-affinity-–¥–ª—è-—Ä–∞–∑–º–µ—â–µ–Ω–∏—è-workloads)
- [50. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Taints –∏ Tolerations](#50-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-taints-–∏-tolerations)
- [51. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Topology Spread Constraints (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)](#51-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-topology-spread-constraints-—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- [52. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Priority Classes –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö workloads](#52-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-priority-classes-–¥–ª—è-–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö-workloads)

## üí∞ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ó–∞—Ç—Ä–∞—Ç

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞—Ç—Ä–∞—Ç
- [75. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–±–∏—Ä–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –≤–∞—à–∏—Ö Workloads](#75-–ø—Ä–∞–≤–∏–ª—å–Ω–æ-–ø–æ–¥–±–∏—Ä–∞–π—Ç–µ-—Ä–∞–∑–º–µ—Ä-–≤–∞—à–∏—Ö-workloads)
- [76. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Spot/Preemptible –∏–Ω—Å—Ç–∞–Ω—Å—ã](#76-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-spotpreemptible-–∏–Ω—Å—Ç–∞–Ω—Å—ã)
- [77. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞](#77-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-–∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ-–∫–ª–∞—Å—Ç–µ—Ä–∞)
- [78. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏ –∞–ª–µ—Ä—Ç–∏—Ç–µ –Ω–∞ –∞–Ω–æ–º–∞–ª–∏–∏ –∑–∞—Ç—Ä–∞—Ç](#78-–º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ-–∏-–∞–ª–µ—Ä—Ç–∏—Ç–µ-–Ω–∞-–∞–Ω–æ–º–∞–ª–∏–∏-–∑–∞—Ç—Ä–∞—Ç)

## üìä –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

### –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [32. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ Prometheus](#32-–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ-—Å–±–æ—Ä-–º–µ—Ç—Ä–∏–∫-prometheus)
- [33. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#33-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [34. –í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É](#34-–≤–∫–ª—é—á–∏—Ç–µ-—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é-—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É)

## üîß GitOps –∏ Service Mesh

### GitOps –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [56. –†–µ–∞–ª–∏–∑—É–π—Ç–µ GitOps —Å ArgoCD](#56-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-gitops-—Å-argocd)
- [57. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FluxCD –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏](#57-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-fluxcd-–¥–ª—è-–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π-–¥–æ—Å—Ç–∞–≤–∫–∏)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Service Mesh
- [58. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Mesh](#58-–∫–æ–≥–¥–∞-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-service-mesh)
- [59. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Istio Virtual Service](#59-–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ-istio-virtual-service)
- [60. –í–∫–ª—é—á–∏—Ç–µ mTLS —Å Istio](#60-–≤–∫–ª—é—á–∏—Ç–µ-mtls-—Å-istio)

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –û—Ç–ª–∞–¥–∫–∞

### kubectl —Å–æ–≤–µ—Ç—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [68. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ü–µ–ª—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏](#68-–ø—Ä–∏–º–µ–Ω—è–π—Ç–µ-—Ü–µ–ª—ã–µ-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
- [69. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤](#69-–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã-–∏–∑-—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö-—Ä–µ—Å—É—Ä—Å–æ–≤)
- [70. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º](#70-–≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-–ø–µ—Ä–µ–¥-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º)

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏
- [71. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ kubectl debug —Å Ephemeral Containers](#71-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-kubectl-debug-—Å-ephemeral-containers)
- [72. –°—Ç—Ä–∏–º–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Pod'–æ–≤](#72-—Å—Ç—Ä–∏–º–∏—Ç–µ-–ª–æ–≥–∏-–∏–∑-–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö-pod–æ–≤)
- [73. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏](#73-–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ-—Ç–µ—Ö–Ω–∏–∫–∏-–æ—Ç–ª–∞–¥–∫–∏)
- [74. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stern –∏ kubectl –ø–ª–∞–≥–∏–Ω—ã](#74-–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ-stern-–∏-kubectl-–ø–ª–∞–≥–∏–Ω—ã)

## üö® Troubleshooting

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- [96. –û—à–∏–±–∫–∏ ImagePullBackOff](#96-–æ—à–∏–±–∫–∏-imagepullbackoff)
- [97. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Ç–ª–∞–¥–∫–∏ CrashLoopBackOff](#97-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-–æ—Ç–ª–∞–¥–∫–∏-crashloopbackoff)
- [98. Pending Pod'—ã - –ø—Ä–æ–±–ª–µ–º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è](#98-pending-pod—ã---–ø—Ä–æ–±–ª–µ–º—ã-–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- [99. –ü—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Service](#99-–ø—Ä–æ–±–ª–µ–º—ã-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è-–∫-service)
- [100. –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ / OOMKilled](#100-–≤—ã—Å–æ–∫–æ–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–ø–∞–º—è—Ç–∏--oomkilled)
- [101. –ü—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è DNS](#101-–ø—Ä–æ–±–ª–µ–º—ã-—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è-dns)

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–≤–∞—Ä–∏–π–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- [89. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Velero –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –∫–ª–∞—Å—Ç–µ—Ä–∞](#89-—Ä–µ–∞–ª–∏–∑—É–π—Ç–µ-velero-–¥–ª—è-—Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö-–∫–æ–ø–∏–π-–∫–ª–∞—Å—Ç–µ—Ä–∞)
- [90. –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ etcd —Å–Ω—ç–ø—à–æ—Ç–æ–≤](#90-—Ä–µ–∑–µ—Ä–≤–Ω—ã–µ-–∫–æ–ø–∏–∏-etcd-—Å–Ω—ç–ø—à–æ—Ç–æ–≤)
- [91. –°–æ–∑–¥–∞–π—Ç–µ Runbook –¥–ª—è –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è](#91-—Å–æ–∑–¥–∞–π—Ç–µ-runbook-–¥–ª—è-–∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)
- [92. –†–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–≤–∞—Ä–∏–π–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ](#92-—Ä–µ–≥—É–ª—è—Ä–Ω–æ-—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ-–∞–≤–∞—Ä–∏–π–Ω–æ–µ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)

## ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã—Ö —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å
- [102. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã Kubernetes](#102-—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ-–∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã-kubernetes)

### –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- [104. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö kubectl –∫–æ–º–∞–Ω–¥](#104-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫-—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö-kubectl-–∫–æ–º–∞–Ω–¥)
- [105. –ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è](#105-–ø–æ–ª–µ–∑–Ω—ã–µ-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

–û–±—â–∏–µ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Kubernetes
--------------------------------------------------

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é API

Kubernetes API –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–µ—Ä—Å–∏–π API –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–ª–æ–º–∞–Ω–Ω—ã–º –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞–º –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ API:**

```bash
kubectl api-resources
kubectl api-versions
```

**–°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ `kubent` (Kube No Trouble) –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö API –≤ –≤–∞—à–∏—Ö –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:

```bash
kubent --helm3 --exit-error
```

### 2. –•—Ä–∞–Ω–∏—Ç–µ –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π

**–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –Ω–∞–ø—Ä—è–º—É—é —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã.** –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª Kubernetes –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ Git (–∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

*   –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –¥–µ–ø–ª–æ—è—Ö
*   –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç-–ª–æ–≥ —Ç–æ–≥–æ, –∫—Ç–æ —á—Ç–æ –∏ –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏–ª
*   –ü—Ä–æ—Å—Ç–∞—è —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏ –∫–æ–¥-—Ä–µ–≤—å—é
*   –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:**

```
kubernetes/
‚îú‚îÄ‚îÄ base/
‚îÇ   ‚îú‚îÄ‚îÄ deployment.yaml
‚îÇ   ‚îú‚îÄ‚îÄ service.yaml
‚îÇ   ‚îî‚îÄ‚îÄ configmap.yaml
‚îú‚îÄ‚îÄ overlays/
‚îÇ   ‚îú‚îÄ‚îÄ development/
‚îÇ   ‚îú‚îÄ‚îÄ staging/
‚îÇ   ‚îî‚îÄ‚îÄ production/
‚îî‚îÄ‚îÄ README.md
```

### 3. –°–æ–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø DRY —Å Kustomize –∏–ª–∏ Helm

–ù–µ –ø–æ–≤—Ç–æ—Ä—è–π—Ç–µ—Å—å –≤ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Kustomize** (–≤—Å—Ç—Ä–æ–µ–Ω –≤ kubectl) –∏–ª–∏ **Helm** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.

**–ü—Ä–∏–º–µ—Ä Kustomize:**

```yaml
# kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - deployment.yaml
  - service.yaml
patches:
  - path: replica-patch.yaml
```


### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Namespaces –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

Namespaces –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –¥–ª—è:

*   –†–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π (dev, staging, prod)
*   –ò–∑–æ–ª—è—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
*   –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–≤–æ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–ª–∏—Ç–∏–∫

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: production
  labels:
    environment: production
    team: platform
```

–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è YAML
---------------------------------

### 5. –ü–∏—à–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ YAML, –∞ –Ω–µ JSON

–•–æ—Ç—è Kubernetes –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ YAML, –∏ JSON, **YAML —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–∞**. –û–Ω –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—Ä–æ—â–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ.

**–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ YAML:**

```yaml
# –•–æ—Ä–æ—à–æ: –ß–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π YAML
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-application
  labels:
    app.kubernetes.io/name: web-app
    app.kubernetes.io/component: frontend
spec:
  replicas: 3
  selector:
    matchLabels:
      app.kubernetes.io/name: web-app
```

### 6. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è –≤ YAML

YAML –∏–º–µ–µ—Ç —Ö–∏—Ç—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ YAML –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

**–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω—ã–µ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è:**

```
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ true/false
enabled: true
secure: false

# ‚ùå –ò–ó–ë–ï–ì–ê–ô–¢–ï - –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
enabled: yes    # –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
enabled: on     # –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ
enabled: "yes"  # –≠—Ç–æ —Å—Ç—Ä–æ–∫–∞, –∞ –Ω–µ –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
```

### 7. –î–µ—Ä–∂–∏—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏

–ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ Kubernetes –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã:

*   –ü—Ä–æ—â–µ —á–∏—Ç–∞—Ç—å –∏ —Ä–µ–≤—å—é–∏—Ç—å
*   –ú–µ–Ω–µ–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã –æ—à–∏–±–∫–∞–º
*   –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

**–ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ Deployment:**

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.25
        ports:
        - containerPort: 80
```

### 8. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

–ï—Å–ª–∏ –≤–∞—à–∏ Deployment, Service –∏ ConfigMap –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –ø–æ–º–µ—Å—Ç–∏—Ç–µ –∏—Ö –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª, —Ä–∞–∑–¥–µ–ª–∏–≤ —á–µ—Ä–µ–∑ `---`.

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
spec:
  # ... —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è deployment
---
apiVersion: v1
kind: Service
metadata:
  name: myapp
spec:
  # ... —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è service
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: myapp-config
data:
  # ... –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```


**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

*   –ê—Ç–æ–º–∞—Ä–Ω—ã–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (–≤—Å—ë –∏–ª–∏ –Ω–∏—á–µ–≥–æ)
*   –ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
*   –õ—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π

–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Pod –∏ Workloads
-------------------------------------------------

### 9. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ–ª—ã–µ Pod'—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–ì–æ–ª—ã–µ Pod'—ã** (Pod'—ã –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞) –æ–ø–∞—Å–Ω—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ:

*   –û–Ω–∏ –Ω–µ –ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –Ω–æ–¥—ã
*   –û–Ω–∏ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
*   –£ –Ω–∏—Ö –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ rolling update

**–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:**

|–°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è     |–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä  |
|---------------------------|------------|
|–î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è    |Deployment  |
|Stateful –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è        |StatefulSet |
|–î–µ–º–æ–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –Ω–æ–¥—ã      |DaemonSet   |
|–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞         |Job         |
|–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏     |CronJob     |

### 10. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Deployments –¥–ª—è stateless –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

Deployments ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ stateless –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-server
  annotations:
    kubernetes.io/description: "REST API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤"
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  selector:
    matchLabels:
      app: api-server
  template:
    metadata:
      labels:
        app: api-server
        version: v2.1.0
    spec:
      containers:
      - name: api
        image: myregistry/api-server:v2.1.0
        ports:
        - containerPort: 8080
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
```

### 11. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Jobs –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á

Jobs –∏–¥–µ–∞–ª—å–Ω—ã –¥–ª—è:

*   –ú–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
*   –ü–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
*   –ò–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

```yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: db-migration
spec:
  backoffLimit: 3
  ttlSecondsAfterFinished: 3600
  template:
    spec:
      restartPolicy: OnFailure
      containers:
      - name: migration
        image: myregistry/db-migrate:v1.0
        command: ["./migrate", "--target=latest"]
```


### 12. –í—Å–µ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

**Liveness Probe:** –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–≤–∏—Å—à–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã **Readiness Probe:** –£–¥–∞–ª—è–µ—Ç pod'—ã –∏–∑ service endpoints –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ **Startup Probe:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ —Å—Ç–∞—Ä—Ç—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```yaml
containers:
- name: app
  image: myapp:v1
  livenessProbe:
    httpGet:
      path: /healthz
      port: 8080
    initialDelaySeconds: 30
    periodSeconds: 10
    failureThreshold: 3
  readinessProbe:
    httpGet:
      path: /ready
      port: 8080
    initialDelaySeconds: 5
    periodSeconds: 5
    successThreshold: 1
  startupProbe:
    httpGet:
      path: /healthz
      port: 8080
    failureThreshold: 30
    periodSeconds: 10
```

–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Deployment
--------------------------------------

### 13. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ Rolling Updates

Rolling updates –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—é—Ç –ø—Ä–æ—Å—Ç–æ–π, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞–º–µ–Ω—è—è —Å—Ç–∞—Ä—ã–µ pod'—ã –Ω–æ–≤—ã–º–∏:

```yaml
spec:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 25%        # –ú–∞–∫—Å. –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö pod'–æ–≤ –≤–æ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
      maxUnavailable: 0    # –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –Ω—É–ª–µ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—è
```


**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:**

*   `maxSurge`: –°–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö pod'–æ–≤ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
*   `maxUnavailable`: –°–∫–æ–ª—å–∫–æ pod'–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è:**

```yaml
maxSurge: 1
maxUnavailable: 0
```


### 14. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pod Disruption Budgets (PDB)

PDB –∑–∞—â–∏—â–∞—é—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –ø–ª–∞–Ω–æ–≤—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π (–¥—Ä–µ–Ω–∞–∂ –Ω–æ–¥, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞):

```yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: api-pdb
spec:
  minAvailable: 2    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ maxUnavailable
  selector:
    matchLabels:
      app: api-server
```

### 15. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Pod Anti-Affinity –¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

–†–∞—Å–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ pod'—ã –ø–æ –Ω–æ–¥–∞–º –∏ –∑–æ–Ω–∞–º –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫–∞–∑–∞—Ö:

```yaml
spec:
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app: api-server
          topologyKey: kubernetes.io/hostname
      - weight: 50
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app: api-server
          topologyKey: topology.kubernetes.io/zone
```

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Service –∏ —Å–µ—Ç–µ–π
-----------------------------

### 16. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ Services –ø–µ—Ä–µ–¥ –∑–∞–≤–∏—Å–∏–º—ã–º–∏ Workloads

Kubernetes –≤–Ω–µ–¥—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Service –≤ Pod'—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ Services –ø–µ—Ä–≤—ã–º–∏, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã:

```yaml
# –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:
kubectl apply -f configmap.yaml
kubectl apply -f service.yaml
kubectl apply -f deployment.yaml
```


**–§–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```yaml
# –î–ª—è Service —Å –∏–º–µ–Ω–µ–º "database"
DATABASE_SERVICE_HOST=10.96.0.10
DATABASE_SERVICE_PORT=5432
```


### 17. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DNS –¥–ª—è Service Discovery

DNS –±–æ–ª–µ–µ –≥–∏–±–æ–∫, —á–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```yaml
# –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–∏—Å–∞–º —á–µ—Ä–µ–∑ DNS
http://my-service.my-namespace.svc.cluster.local
http://my-service.my-namespace  # –°–æ–∫—Ä–∞—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞
http://my-service              # –í –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–æ–≥–æ –∂–µ namespace
```

### 18. –ò–∑–±–µ–≥–∞–π—Ç–µ hostPort –∏ hostNetwork

–≠—Ç–∏ –æ–ø—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–∑–¥–∞—é—Ç —Ä–∏—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```yaml
# ‚ùå –ò–ó–ë–ï–ì–ê–ô–¢–ï, –µ—Å–ª–∏ –Ω–µ –∫—Ä–∞–π–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
spec:
  hostNetwork: true
  containers:
  - name: app
    ports:
    - containerPort: 80
      hostPort: 80  # –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç pod –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–¥–µ
```

**–õ—É—á—à–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**

*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `NodePort` Services –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `LoadBalancer` Services –≤ –æ–±–ª–∞—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ingress –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è HTTP —Ç—Ä–∞—Ñ–∏–∫–∞
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `kubectl port-forward` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 19. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Headless Services –¥–ª—è StatefulSet Discovery

–î–ª—è –ø—Ä—è–º–æ–≥–æ pod-to-pod —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: mysql
spec:
  clusterIP: None  # Headless service
  selector:
    app: mysql
  ports:
  - port: 3306
```

–≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç DNS –∑–∞–ø–∏—Å–∏ –≤–∏–¥–∞:

```
mysql-0.mysql.default.svc.cluster.local
mysql-1.mysql.default.svc.cluster.local
```

–ú–µ—Ç–∫–∏, —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
-----------------------------

### 20. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ

–ú–µ—Ç–∫–∏ ‚Äî —ç—Ç–æ –∫–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã Kubernetes:

```yaml
metadata:
  labels:
    # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ç–∫–∏ Kubernetes
    app.kubernetes.io/name: web-app
    app.kubernetes.io/instance: web-app-prod
    app.kubernetes.io/version: "2.1.0"
    app.kubernetes.io/component: frontend
    app.kubernetes.io/part-of: ecommerce
    app.kubernetes.io/managed-by: helm
    
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
    team: platform
    environment: production
    cost-center: cc-123
```

### 21. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–µ–ª–µ–∫—Ü–∏–∏ –ø–æ –º–µ—Ç–∫–∞–º

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–∫–∏ –¥–ª—è –º–æ—â–Ω–æ–π —Å–µ–ª–µ–∫—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ frontend pod'—ã
kubectl get pods -l app.kubernetes.io/component=frontend

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ production —Ä–µ—Å—É—Ä—Å—ã
kubectl get all -l environment=production

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
kubectl delete all -l environment=test

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
kubectl get pods -l 'app=web,environment in (staging,production)'
```

### 22. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç –Ω–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

```yaml
metadata:
  annotations:
    kubernetes.io/description: "–û—Å–Ω–æ–≤–Ω–æ–π API —Å–µ—Ä–≤–µ—Ä, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –∑–∞–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤"
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    deployment.kubernetes.io/revision: "3"
    kubectl.kubernetes.io/last-applied-configuration: |
      {...}
```


### 23. –û—Ç–ª–∞–¥–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –º–µ—Ç–∫–∞–º–∏

–í—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–∏—Ç–µ pod'—ã –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```bash
# –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å pod (—É–¥–∞–ª–∏—Ç—å –∏–∑ service endpoints)
kubectl label pod myapp-pod-xyz app-

# Pod –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫
# –û—Ç–ª–∞–¥–∫–∞ pod'–∞
kubectl exec -it myapp-pod-xyz -- /bin/sh

# –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É–¥–∞–ª–∏—Ç–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pod
kubectl delete pod myapp-pod-xyz
```

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ConfigMaps –∏ Secrets
--------------------------------

### 24. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ConfigMaps –¥–ª—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  # –ü—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
  LOG_LEVEL: "info"
  MAX_CONNECTIONS: "100"
  
  # –¶–µ–ª—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
  config.yaml: |
    server:
      port: 8080
      timeout: 30s
    features:
      enable_cache: true
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ pod'–∞—Ö:**

```yaml
spec:
  containers:
  - name: app
    envFrom:
    - configMapRef:
        name: app-config
    volumeMounts:
    - name: config
      mountPath: /etc/config
  volumes:
  - name: config
    configMap:
      name: app-config
```


### 25. –ë–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å Secrets

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
type: Opaque
stringData:  # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stringData –¥–ª—è plaintext –≤–≤–æ–¥–∞
  username: admin
  password: supersecret123
```


**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

*   –í–∫–ª—é—á–∏—Ç–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ at rest –¥–ª—è etcd
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å–µ–∫—Ä–µ—Ç–æ–≤ (Vault, AWS Secrets Manager)
*   –†–µ–∞–ª–∏–∑—É–π—Ç–µ RBAC –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Secrets
*   –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã
*   –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –ª–∏–º–∏—Ç—ã
------------------------------

### 26. –í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "—à—É–º–Ω—ã—Ö —Å–æ—Å–µ–¥–µ–π" –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:

```yaml
spec:
  containers:
  - name: app
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

```

**–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:**

*   `requests`: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
*   `limits`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
*   –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ `requests` –±–ª–∏–∑–∫–æ –∫ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
*   –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ memory `limit` = `request` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è OOMKilled
*   CPU limits –º–æ–≥—É—Ç –±—ã—Ç—å –≤ 2-4 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ requests –¥–ª—è burst capacity

### 27. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ResourceQuotas –¥–ª—è –ª–∏–º–∏—Ç–æ–≤ namespace

```yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: team-quota
  namespace: team-alpha
spec:
  hard:
    requests.cpu: "10"
    requests.memory: 20Gi
    limits.cpu: "20"
    limits.memory: 40Gi
    pods: "50"
```


### 28. –†–µ–∞–ª–∏–∑—É–π—Ç–µ LimitRanges –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```yaml
apiVersion: v1
kind: LimitRange
metadata:
  name: default-limits
spec:
  limits:
  - type: Container
    default:
      memory: "256Mi"
      cpu: "200m"
    defaultRequest:
      memory: "128Mi"
      cpu: "100m"
```

–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
----------------------------------------------

### 29. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –æ—Ç root

```yaml
spec:
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
  containers:
  - name: app
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      capabilities:
        drop:
          - ALL
```

### 30. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Network Policies

–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ pod-to-pod –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é:

```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: api-network-policy
spec:
  podSelector:
    matchLabels:
      app: api
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend
    ports:
    - port: 8080
  egress:
  - to:
    - podSelector:
        matchLabels:
          app: database
    ports:
    - port: 5432
```

### 31. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pod Security Standards (PSS) –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö PSP

**–í–∞–∂–Ω–æ:** PodSecurityPolicy (PSP) —É–¥–∞–ª–µ–Ω—ã –≤ Kubernetes v1.25. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

**Pod Security Admission (PSA)** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: production
  labels:
    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É (–±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è)
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/enforce-version: latest
    
    # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
    pod-security.kubernetes.io/warn: restricted
    pod-security.kubernetes.io/warn-version: latest
    
    # –ê—É–¥–∏—Ç (–ª–æ–≥–∏—Ä—É–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è)
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/audit-version: latest
```

**–£—Ä–æ–≤–Ω–∏ Pod Security Standards:**

* `privileged` - –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
* `baseline` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–∑–∞–ø—Ä–µ—â–∞–µ—Ç –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
* `restricted` - —Å—Ç—Ä–æ–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫:**

* **Kyverno** - –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ YAML
* **OPA Gatekeeper** - –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ —è–∑—ã–∫–µ Rego (–±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ)

–ü—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∏ Kyverno:

```yaml
apiVersion: kyverno.io/v1
kind: ClusterPolicy
metadata:
  name: require-non-root
spec:
  validationFailureAction: enforce
  rules:
  - name: check-runAsNonRoot
    match:
      resources:
        kinds:
        - Pod
    validate:
      message: "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–µ –æ—Ç root"
      pattern:
        spec:
          securityContext:
            runAsNonRoot: true
```

–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
---------------------------

### 32. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ Prometheus

–í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏:

```yaml
apiVersion: v1
kind: Pod
metadata:
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"
spec:
  containers:
  - name: app
    image: myapp:v1
    ports:
    - containerPort: 8080
      name: metrics
```

**–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**

* –≠–∫—Å–ø–æ–Ω–∏—Ä—É–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º –ø–æ—Ä—Ç—É
* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ (counter, gauge, histogram)
* –í–∫–ª—é—á–∞–π—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–µ—Ç–∫–∏
* –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞–∫ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 33. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤:

```yaml
spec:
  containers:
  - name: app
    env:
    - name: LOG_FORMAT
      value: "json"
    - name: LOG_LEVEL
      value: "info"
```

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∞:**

```json
{
  "timestamp": "2025-05-20T10:30:45Z",
  "level": "error",
  "service": "api-server",
  "trace_id": "abc123",
  "user_id": "user456",
  "message": "Failed to connect to database",
  "error": "connection timeout"
}
```

### 34. –í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É

–î–æ–±–∞–≤—å—Ç–µ OpenTelemetry –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:

```yaml
spec:
  containers:
  - name: app
    env:
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: "http://jaeger-collector:4317"
    - name: OTEL_SERVICE_NAME
      value: "api-server"
    - name: OTEL_TRACES_SAMPLER
      value: "parentbased_traceidratio"
    - name: OTEL_TRACES_SAMPLER_ARG
      value: "0.1"  # –°—ç–º–ø–ª–∏—Ä–æ–≤–∞—Ç—å 10% —Ç—Ä–µ–π—Å–æ–≤
```

Graceful Shutdown –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
-----------------------------------------------

### 35. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

```yaml
spec:
  terminationGracePeriodSeconds: 60  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 30
  containers:
  - name: app
    lifecycle:
      preStop:
        exec:
          command:
          - /bin/sh
          - -c
          - |
            # –ü–æ–¥–æ–∂–¥–∞—Ç—å –ø–æ–∫–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ —É–¥–∞–ª–∏—Ç pod –∏–∑ —Ä–æ—Ç–∞—Ü–∏–∏
            sleep 5
            # Gracefully –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            kill -SIGTERM 1
            # –ü–æ–¥–æ–∂–¥–∞—Ç—å –¥—Ä–µ–Ω–∞–∂–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
            wait
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**

1. Kubernetes –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SIGTERM –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º
2. preStop hook –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º (–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è hook'–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è SIGTERM
4. –ü–æ—Å–ª–µ grace period –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è SIGKILL

### 36. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ SIGTERM –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

```go
// –û–±—Ä–∞–±–æ—Ç–∫–∞ graceful shutdown
sigChan := make(chan os.Signal, 1)
signal.Notify(sigChan, syscall.SIGTERM)

go func() {
    <-sigChan
    log.Println("–ü–æ–ª—É—á–µ–Ω SIGTERM, –≤—ã–∫–ª—é—á–µ–Ω–∏–µ gracefully...")
    
    // –ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    server.SetKeepAlivesEnabled(false)
    
    // –î–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∑–∞–ø—Ä–æ—Å–∞–º –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è
    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)
    defer cancel()
    server.Shutdown(ctx)
}()
```

### 37. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –¥—Ä–µ–Ω–∞–∂ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–î–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∑–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∏:

```yaml
spec:
  containers:
  - name: app
    readinessProbe:
      httpGet:
        path: /ready
        port: 8080
      periodSeconds: 5
    lifecycle:
      preStop:
        httpGet:
          path: /shutdown
          port: 8080
```

**Shutdown endpoint –¥–æ–ª–∂–µ–Ω:**

* –í–æ–∑–≤—Ä–∞—â–∞—Ç—å 503 Service Unavailable
* –ü—Ä–æ–≤–∞–ª–∏—Ç—å readiness probe
* –ü–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
* –ó–∞—Ç–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è

–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑–∞–º–∏
------------------------------------

### 38. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–ü–ª–æ—Ö–æ:**

```yaml
image: nginx:1.25
```

**–•–æ—Ä–æ—à–æ:**

```yaml
image: nginx@sha256:4c0fdaa8b6341bfdeca5f18f7837462c80cff90527ee35ef185571e1c327beac
```

**–ü–æ—á–µ–º—É:** –¢–µ–≥–∏ –∏–∑–º–µ–Ω—è–µ–º—ã, –¥–∞–π–¥–∂–µ—Å—Ç—ã –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ç–æ—á–Ω—É—é –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞.

### 39. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ imagePullPolicy

```yaml
spec:
  containers:
  - name: app
    image: myregistry/app:v1.0.0
    imagePullPolicy: IfNotPresent  # –∏–ª–∏ Always
```

**–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:**

| –¢–µ–≥ –æ–±—Ä–∞–∑–∞ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ |
|-----------|------------------------|---------|
| `:latest` | Always | –¢–µ–≥ —á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è |
| `:v1.0.0` | IfNotPresent | –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π —Ç–µ–≥ |
| `@sha256:...` | IfNotPresent | –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π –¥–∞–π–¥–∂–µ—Å—Ç |
| Development | Always | –ë—ã—Å—Ç—Ä—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ |

### 40. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–µ—Å—Ç—Ä–∞—Ö

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: registry-credentials
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: <base64-encoded-docker-config>
---
apiVersion: apps/v1
kind: Deployment
spec:
  template:
    spec:
      imagePullSecrets:
      - name: registry-credentials
      containers:
      - name: app
        image: private-registry.io/myapp:v1
```

### 41. –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑—ã –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ CI/CD:

```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Trivy
trivy image myregistry/app:v1.0.0

# –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
trivy image --severity HIGH,CRITICAL --exit-code 1 myregistry/app:v1.0.0
```

–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
------------------------------

### 42. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Horizontal Pod Autoscaler (HPA)

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: api-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: api-server
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 50
        periodSeconds: 60
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
      - type: Percent
        value: 100
        periodSeconds: 30
```

### 43. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è HPA

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: queue-worker-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: queue-worker
  minReplicas: 2
  maxReplicas: 20
  metrics:
  - type: External
    external:
      metric:
        name: queue_depth
        selector:
          matchLabels:
            queue: orders
      target:
        type: AverageValue
        averageValue: "30"  # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –æ—á–µ—Ä–µ–¥–∏ > 30 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ pod
```

### 44. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ Vertical Pod Autoscaler (VPA)

VPA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç CPU –∏ memory requests:

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: api-vpa
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: api-server
  updatePolicy:
    updateMode: "Auto"  # –∏–ª–∏ "Recreate" –∏–ª–∏ "Off"
  resourcePolicy:
    containerPolicies:
    - containerName: api
      minAllowed:
        cpu: 100m
        memory: 128Mi
      maxAllowed:
        cpu: 2
        memory: 2Gi
```

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HPA –∏ VPA –Ω–∞ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –º–µ—Ç—Ä–∏–∫–µ (CPU/memory) –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

### 45. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ KEDA –¥–ª—è event-driven –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

```yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: redis-scaler
spec:
  scaleTargetRef:
    name: message-processor
  minReplicaCount: 1
  maxReplicaCount: 50
  triggers:
  - type: redis
    metadata:
      address: redis:6379
      listName: message-queue
      listLength: "5"  # –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –æ—á–µ—Ä–µ–¥–∏ > 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ pod
```

–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
--------------------------

### 46. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PersistentVolumes –¥–ª—è stateful –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: fast-ssd
  resources:
    requests:
      storage: 50Gi
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: mysql
spec:
  serviceName: mysql
  replicas: 1
  template:
    spec:
      containers:
      - name: mysql
        image: mysql:8.0
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: ["ReadWriteOnce"]
      storageClassName: fast-ssd
      resources:
        requests:
          storage: 50Gi
```

### 47. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ StorageClasses –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast-ssd
  annotations:
    storageclass.kubernetes.io/is-default-class: "false"
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
  iops: "3000"
  throughput: "125"
  encrypted: "true"
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: slow-hdd
provisioner: kubernetes.io/aws-ebs
parameters:
  type: st1
allowVolumeExpansion: true
```

### 48. –í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Volume

```yaml
# –°–Ω–∞—á–∞–ª–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ StorageClass —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
allowVolumeExpansion: true

# –ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ PVC –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –±–æ–ª—å—à–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
kubectl edit pvc mysql-pvc
# –ò–∑–º–µ–Ω–∏—Ç—å: storage: 50Gi -> storage: 100Gi
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ volume –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç online —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ pod'–∞.

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
----------------------------------

### 49. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Node Affinity –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è workloads

```yaml
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: kubernetes.io/arch
            operator: In
            values:
            - amd64
          - key: node-type
            operator: In
            values:
            - compute-optimized
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 80
        preference:
          matchExpressions:
          - key: topology.kubernetes.io/zone
            operator: In
            values:
            - us-east-1a
```

### 50. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Taints –∏ Tolerations

**Taint –Ω–æ–¥:**

```bash
# Taint –Ω–æ–¥—ã –¥–ª—è GPU workloads
kubectl taint nodes gpu-node-1 workload=gpu:NoSchedule

# Taint –Ω–æ–¥—ã –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
kubectl taint nodes node-2 maintenance=true:NoExecute
```

**–î–æ–±–∞–≤—å—Ç–µ tolerations –∫ pod'–∞–º:**

```yaml
spec:
  tolerations:
  - key: "workload"
    operator: "Equal"
    value: "gpu"
    effect: "NoSchedule"
  - key: "maintenance"
    operator: "Exists"
    effect: "NoExecute"
    tolerationSeconds: 300  # –í—ã—Å–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç
```

### 51. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Topology Spread Constraints (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

```yaml
spec:
  topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: kubernetes.io/hostname
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app: api-server
  - maxSkew: 2
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: ScheduleAnyway
    labelSelector:
      matchLabels:
        app: api-server
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ anti-affinity:**

* –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
* –õ—É—á—à–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π
* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–∏—Å–±–∞–ª–∞–Ω—Å –∑–æ–Ω

### 52. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Priority Classes –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö workloads

```yaml
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: high-priority
value: 1000000
globalDefault: false
description: "–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ workloads"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: critical-api
spec:
  template:
    spec:
      priorityClassName: high-priority
      containers:
      - name: api
        image: api:v1
```

**–ó–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:**

* –°–∏—Å—Ç–µ–º–Ω–æ-–∫—Ä–∏—Ç–∏—á–Ω—ã–µ: 2000000000+
* –ë–∏–∑–Ω–µ—Å-–∫—Ä–∏—Ç–∏—á–Ω—ã–µ: 1000000
* –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ: 0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
* –ü–∞–∫–µ—Ç–Ω—ã–µ/—Ñ–æ–Ω–æ–≤—ã–µ: -1000

–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
--------------------------------------

### 53. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Init Containers –¥–ª—è –∑–∞–¥–∞—á –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```yaml
spec:
  initContainers:
  - name: wait-for-db
    image: busybox:1.36
    command:
    - sh
    - -c
    - |
      until nc -z postgres 5432; do
        echo "–û–∂–∏–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
        sleep 2
      done
  - name: run-migrations
    image: myapp:v1
    command: ["./migrate", "--up"]
    env:
    - name: DATABASE_URL
      valueFrom:
        secretKeyRef:
          name: db-credentials
          key: url
  containers:
  - name: app
    image: myapp:v1
```

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

* –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
* –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
* –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
* –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ shared volumes

### 54. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω Sidecar

```yaml
spec:
  containers:
  - name: app
    image: myapp:v1
    ports:
    - containerPort: 8080
  - name: log-shipper
    image: fluent/fluent-bit:2.0
    volumeMounts:
    - name: logs
      mountPath: /var/log/app
  - name: metrics-exporter
    image: prometheus/node-exporter:latest
    ports:
    - containerPort: 9100
  volumes:
  - name: logs
    emptyDir: {}
```

**–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è sidecar:**

* –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ª–æ–≥–æ–≤ (Fluent Bit, Filebeat)
* –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
* Service mesh –ø—Ä–æ–∫—Å–∏ (Envoy)
* –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
* –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 55. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ephemeral Containers –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –î–æ–±–∞–≤–∏—Ç—å debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫ —Ä–∞–±–æ—Ç–∞—é—â–µ–º—É pod'—É
kubectl debug -it pod-name --image=busybox:1.36 --target=app

# –û—Ç–ª–∞–¥–∫–∞ –Ω–æ–¥—ã —Å ephemeral –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
kubectl debug node/node-name -it --image=ubuntu

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å pod –∏ –¥–æ–±–∞–≤–∏—Ç—å debug –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
kubectl debug pod-name -it --copy-to=debug-pod --container=debug --image=nicolaka/netshoot
```

GitOps –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
----------------------------------

### 56. –†–µ–∞–ª–∏–∑—É–π—Ç–µ GitOps —Å ArgoCD

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-application
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/myorg/k8s-manifests
    targetRevision: main
    path: applications/production
  destination:
    server: https://kubernetes.default.svc
    namespace: production
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
    retry:
      limit: 5
      backoff:
        duration: 5s
        factor: 2
        maxDuration: 3m
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ GitOps:**

* –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –≤ Git
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—Ä–µ–π—Ñ–∞
* –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç–∫–∞—Ç—ã —á–µ—Ä–µ–∑ Git revert
* –ê—É–¥–∏—Ç-–ª–æ–≥ —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—Ä–∏—é Git

### 57. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FluxCD –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏

```yaml
apiVersion: flagger.app/v1beta1
kind: Canary
metadata:
  name: api-server
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: api-server
  service:
    port: 8080
  analysis:
    interval: 1m
    threshold: 5
    maxWeight: 50
    stepWeight: 10
    metrics:
    - name: request-success-rate
      thresholdRange:
        min: 99
      interval: 1m
    - name: request-duration
      thresholdRange:
        max: 500
      interval: 1m
```

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Service Mesh
------------------------

### 58. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Mesh

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ service mesh –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ:**

* Mutual TLS –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
* –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–æ–º (canary, A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
* –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
* Circuit breaking –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
* –î–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ service mesh –µ—Å–ª–∏:**

* –£ –≤–∞—Å < 20 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
* –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–≥–æ ingress –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
* –ö–æ–º–∞–Ω–¥–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –≤ service mesh
* –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º—ã

### 59. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Istio Virtual Service

```yaml
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: api-routes
spec:
  hosts:
  - api.example.com
  http:
  - match:
    - headers:
        canary:
          exact: "true"
    route:
    - destination:
        host: api-server
        subset: v2
      weight: 100
  - route:
    - destination:
        host: api-server
        subset: v1
      weight: 90
    - destination:
        host: api-server
        subset: v2
      weight: 10
```

### 60. –í–∫–ª—é—á–∏—Ç–µ mTLS —Å Istio

```yaml
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: production
spec:
  mtls:
    mode: STRICT
---
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: api-authz
  namespace: production
spec:
  selector:
    matchLabels:
      app: api-server
  action: ALLOW
  rules:
  - from:
    - source:
        principals: ["cluster.local/ns/production/sa/frontend"]
```

Ingress –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø
-------------------------------------

### 61. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx Ingress Controller

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  tls:
  - hosts:
    - app.example.com
    secretName: app-tls-cert
  rules:
  - host: app.example.com
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: api-server
            port:
              number: 8080
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend
            port:
              number: 80
```

### 62. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π TLS —Å cert-manager

```yaml
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
    email: admin@example.com
    privateKeySecretRef:
      name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: nginx
```

### 63. Rate Limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: protected-api
  annotations:
    nginx.ingress.kubernetes.io/limit-rps: "10"
    nginx.ingress.kubernetes.io/limit-connections: "5"
    nginx.ingress.kubernetes.io/limit-burst-multiplier: "2"
spec:
  rules:
  - host: api.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: api-server
            port:
              number: 8080
```

RBAC –∏ Service Accounts
------------------------

### 64. –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø—É –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π

```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: api-server-sa
  namespace: production
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: api-server-role
  namespace: production
rules:
- apiGroups: [""]
  resources: ["configmaps"]
  resourceNames: ["app-config"]
  verbs: ["get", "list"]
- apiGroups: [""]
  resources: ["secrets"]
  resourceNames: ["db-credentials"]
  verbs: ["get"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: api-server-binding
  namespace: production
subjects:
- kind: ServiceAccount
  name: api-server-sa
  namespace: production
roleRef:
  kind: Role
  name: api-server-role
  apiGroup: rbac.authorization.k8s.io
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-server
spec:
  template:
    spec:
      serviceAccountName: api-server-sa
      automountServiceAccountToken: false  # –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
```

### 65. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Service Account –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: default
  namespace: production
automountServiceAccountToken: false
```

**–ü–æ—á–µ–º—É:** Pod'–∞–º –Ω–µ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ Kubernetes API –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - —ç—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏.

### 66. –í–∫–ª—é—á–∏—Ç–µ –∞—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# /etc/kubernetes/audit-policy.yaml
apiVersion: audit.k8s.io/v1
kind: Policy
rules:
- level: Metadata
  omitStages:
  - RequestReceived
  resources:
  - group: ""
    resources: ["secrets", "configmaps"]
- level: Request
  verbs: ["create", "update", "patch", "delete"]
  resources:
  - group: "apps"
    resources: ["deployments", "statefulsets"]
```

–ö–ª–∞—Å—Å—ã –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (QoS)
-----------------------------------

### 67. –ü–æ–Ω–∏–º–∞–Ω–∏–µ QoS –∫–ª–∞—Å—Å–æ–≤

**Guaranteed (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

```yaml
resources:
  requests:
    memory: "256Mi"
    cpu: "500m"
  limits:
    memory: "256Mi"  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–≤–µ–Ω request
    cpu: "500m"      # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–≤–µ–Ω request
```

**Burstable (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

```yaml
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"  # –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç request
    cpu: "500m"
```

**BestEffort (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

```yaml
# –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã requests –∏–ª–∏ limits
```

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã—Å–µ–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –Ω–æ–¥–µ:** BestEffort ‚Üí Burstable ‚Üí Guaranteed

kubectl —Å–æ–≤–µ—Ç—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
-------------------------------------------

### 68. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ü–µ–ª—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
kubectl apply -f ./kubernetes/ --recursive

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ server-side apply –¥–ª—è –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
kubectl apply -f ./kubernetes/ --server-side

# –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
kubectl diff -f ./kubernetes/
```


### 69. –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π deployment –∫–∞–∫ YAML
kubectl get deployment nginx -o yaml > nginx-deployment.yaml

# –°–æ–∑–¥–∞—Ç—å deployment –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ, –∑–∞—Ç–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
kubectl create deployment nginx --image=nginx --dry-run=client -o yaml > deployment.yaml

```


### 70. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è dry-run (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
kubectl apply -f deployment.yaml --dry-run=server

# –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
kubectl apply -f deployment.yaml --dry-run=client

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å kubeconform (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –∑–∞–º–µ–Ω–∞ kubeval)
kubeconform -strict deployment.yaml

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
kubeconform -strict -summary -output json deployment.yaml

# –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
kubeconform -strict kubernetes/

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π Kubernetes
kubeconform -kubernetes-version 1.28.0 deployment.yaml

# –í–∞–ª–∏–¥–∞—Ü–∏—è CRD (Custom Resource Definitions)
kubeconform -schema-location default \
  -schema-location 'https://raw.githubusercontent.com/datreeio/CRDs-catalog/main/{{.Group}}/{{.ResourceKind}}_{{.ResourceAPIVersion}}.json' \
  custom-resource.yaml

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ö–µ–º—ã (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è CRD)
kubeconform -ignore-missing-schemas deployment.yaml

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤
kubeconform -reject-kinds Service,ConfigMap deployment.yaml
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ kubeconform:**
- üöÄ –í 10-20 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ kubeval
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (kubeval –∑–∞–±—Ä–æ—à–µ–Ω —Å 2021)
- üì¶ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CRD –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üéØ –õ—É—á—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏
----------------------------

### 71. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ kubectl debug —Å Ephemeral Containers

```bash
# –û—Ç–ª–∞–¥–∫–∞ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ pod'–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
kubectl debug -it api-pod-xyz \
  --image=nicolaka/netshoot \
  --target=api \
  --share-processes

# –í–Ω—É—Ç—Ä–∏ debug –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—ã –º–æ–∂–µ—Ç–µ:
# - –ò–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å (netstat, tcpdump)
# - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã (ps, top)
# - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (curl, ping)
# - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

# –û—Ç–ª–∞–¥–∫–∞ –Ω–æ–¥—ã –Ω–∞–ø—Ä—è–º—É—é
kubectl debug node/worker-node-1 -it --image=ubuntu

# –°–æ–∑–¥–∞—Ç—å debug –∫–æ–ø–∏—é pod'–∞ —Å –¥—Ä—É–≥–∏–º –æ–±—Ä–∞–∑–æ–º
kubectl debug api-pod-xyz -it \
  --copy-to=debug-api \
  --container=api \
  --image=myapp:debug-version
```

### 72. –°—Ç—Ä–∏–º–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Pod'–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å stern –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –ª–æ–≥–æ–≤
brew install stern

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö pod'–æ–≤ —Å –º–µ—Ç–∫–æ–π
stern -l app=api-server

# –í–∫–ª—é—á–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏ –∏–º–µ–Ω–∞ pod'–æ–≤
stern -l app=api-server -t --tail 50

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ —Å grep
stern api-server --exclude-container=istio-proxy | grep ERROR

# –ù–µ—Å–∫–æ–ª—å–∫–æ namespaces
stern api-server --all-namespaces
```

### 73. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç–ª–∞–¥–∫–∏

```bash
# Port forward –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
kubectl port-forward svc/api-server 8080:80

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–º pod'–µ
kubectl exec -it pod-name -- /bin/bash

# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑/–≤ pod
kubectl cp pod-name:/var/log/app.log ./app.log
kubectl cp ./config.yaml pod-name:/etc/config/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
kubectl get events --sort-by='.lastTimestamp' -A

# –û–ø–∏—Å–∞—Ç—å —Ä–µ—Å—É—Ä—Å –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
kubectl describe pod api-pod-xyz

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl top pods
kubectl top nodes
```

### 74. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stern –∏ kubectl –ø–ª–∞–≥–∏–Ω—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å kubectl –ø–ª–∞–≥–∏–Ω—ã
kubectl krew install tail
kubectl krew install debug-shell
kubectl krew install resource-capacity

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å resource-capacity –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl resource-capacity --pods --util

# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è pod'–æ–≤
kubectl get pods --field-selector status.phase=Running
kubectl get pods --field-selector spec.nodeName=node-1
```

–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞—Ç—Ä–∞—Ç
-----------------------------------

### 75. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–±–∏—Ä–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –≤–∞—à–∏—Ö Workloads

```bash
# –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl top pods -n production

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPA –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
kubectl get vpa api-server-vpa -o yaml

# –°—Ä–∞–≤–Ω–∏—Ç—å requests —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
kubectl get pods -o custom-columns=\
NAME:.metadata.name,\
CPU_REQ:.spec.containers[0].resources.requests.cpu,\
MEM_REQ:.spec.containers[0].resources.requests.memory
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è right-sizing:**

```yaml
# –ù–∞—á–∞—Ç—å —Å –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
  limits:
    memory: "256Mi"
    cpu: "200m"

# –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å 1-2 –Ω–µ–¥–µ–ª–∏, –∑–∞—Ç–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ:
# - P95 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ + 20% –±—É—Ñ–µ—Ä
# - P95 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU –¥–ª—è requests
# - P99 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU –¥–ª—è limits
```

### 76. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Spot/Preemptible –∏–Ω—Å—Ç–∞–Ω—Å—ã

```yaml
# Node affinity –¥–ª—è spot –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
apiVersion: apps/v1
kind: Deployment
metadata:
  name: batch-processor
spec:
  template:
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            preference:
              matchExpressions:
              - key: node.kubernetes.io/instance-type
                operator: In
                values:
                - spot
                - preemptible
      tolerations:
      - key: "spot"
        operator: "Exists"
```

**–õ—É—á—à–µ –≤—Å–µ–≥–æ –¥–ª—è:**

* Stateless workloads
* –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
* CI/CD —Ä–∞–Ω–Ω–µ—Ä—ã
* –û–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 77. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

```yaml
# AWS Cluster Autoscaler –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-autoscaler-config
data:
  scale-down-delay-after-add: "10m"
  scale-down-unneeded-time: "10m"
  skip-nodes-with-local-storage: "false"
  skip-nodes-with-system-pods: "false"
```

### 78. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏ –∞–ª–µ—Ä—Ç–∏—Ç–µ –Ω–∞ –∞–Ω–æ–º–∞–ª–∏–∏ –∑–∞—Ç—Ä–∞—Ç

```yaml
# –ü—Ä–∏–º–µ—Ä Prometheus –∞–ª–µ—Ä—Ç–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
apiVersion: v1
kind: ConfigMap
metadata:
  name: cost-alerts
data:
  alerts.yaml: |
    groups:
    - name: cost-optimization
      rules:
      - alert: HighCPUWaste
        expr: |
          (sum(rate(container_cpu_usage_seconds_total[5m])) by (namespace, pod) /
           sum(kube_pod_container_resource_requests{resource="cpu"}) by (namespace, pod)) < 0.3
        for: 1h
        annotations:
          summary: "Pod {{ $labels.pod }} –∏—Å–ø–æ–ª—å–∑—É–µ—Ç < 30% –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ CPU"
      
      - alert: HighMemoryWaste
        expr: |
          (sum(container_memory_working_set_bytes) by (namespace, pod) /
           sum(kube_pod_container_resource_requests{resource="memory"}) by (namespace, pod)) < 0.5
        for: 1h
        annotations:
          summary: "Pod {{ $labels.pod }} –∏—Å–ø–æ–ª—å–∑—É–µ—Ç < 50% –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏"
```

–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
--------------------------------------

### 79. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```yaml
spec:
  containers:
  - name: app
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    env:
    - name: LOG_LEVEL
      value: "debug"
    - name: DB_HOST
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: database-host
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: db-secret
          key: password
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: ConfigMap –∫–∞–∫ envFrom
    envFrom:
    - configMapRef:
        name: app-config
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Secret –∫–∞–∫ envFrom (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    - secretRef:
        name: app-secrets
```

**–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:** `env` > `envFrom` (ConfigMap) > `envFrom` (Secret)

### 80. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ ConfigMaps –∏ Secrets

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config-v2
immutable: true
data:
  config.yaml: |
    feature_flags:
      new_feature: enabled
---
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials-v2
immutable: true
stringData:
  password: "newsecretpassword"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
* –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (kubelet –Ω–µ —Å–ª–µ–¥–∏—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏)
* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ pod'–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞
* –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞ –≤–º–µ—Å—Ç–µ —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º

### 81. –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Pod –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ConfigMap

```yaml
# –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é checksum –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-server
spec:
  template:
    metadata:
      annotations:
        checksum/config: {{ include (print $.Template.BasePath "/configmap.yaml") . | sha256sum }}
    spec:
      containers:
      - name: app
        envFrom:
        - configMapRef:
            name: app-config
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Reloader:**

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-server
  annotations:
    reloader.stakater.com/auto: "true"
```

–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ Lifecycle Hooks
--------------------------------------

### 82. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ postStart Hooks –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```yaml
spec:
  containers:
  - name: app
    lifecycle:
      postStart:
        exec:
          command:
          - /bin/sh
          - -c
          - |
            # –ü–æ–¥–æ–∂–¥–∞—Ç—å –ø–æ–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–æ
            until curl -f http://localhost:8080/health; do
              sleep 1
            done
            
            # –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–æ –≤–Ω–µ—à–Ω–µ–º —Å–µ—Ä–≤–∏—Å–µ
            curl -X POST http://registry/register \
              -d "instance=$HOSTNAME"
```

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –≤–æ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–µ
* –ü—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
* –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ runtime –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 83. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã preStop Hook

```yaml
spec:
  containers:
  - name: app
    lifecycle:
      preStop:
        exec:
          command:
          - /bin/sh
          - -c
          - |
            # 1. –†–∞–∑—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞
            curl -X DELETE http://lb/deregister/$HOSTNAME
            
            # 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å –ø–æ–∫–∞ LB —É–¥–∞–ª–∏—Ç –∏–Ω—Å—Ç–∞–Ω—Å (5—Å)
            sleep 5
            
            # 3. –°–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
            kill -USR1 1
            
            # 4. –ü–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
            while [ $(netstat -an | grep ESTABLISHED | wc -l) -gt 0 ]; do
              sleep 1
            done
            
            # 5. –°–±—Ä–æ—Å–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏/–ª–æ–≥–∏
            curl -X POST http://localhost:9090/flush
```

### 84. –ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ Hooks —Å Probes

```yaml
spec:
  terminationGracePeriodSeconds: 90
  containers:
  - name: app
    readinessProbe:
      httpGet:
        path: /ready
        port: 8080
      periodSeconds: 5
      failureThreshold: 1  # –ë—ã—Å—Ç—Ä–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ endpoints
    
    livenessProbe:
      httpGet:
        path: /health
        port: 8080
      periodSeconds: 10
      failureThreshold: 3
    
    lifecycle:
      preStop:
        httpGet:
          path: /shutdown
          port: 8080
          scheme: HTTP
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–∏—è:**

1. preStop hook –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (–≤—ã–∑—ã–≤–∞–µ—Ç `/shutdown`)
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 503 –Ω–∞ `/ready` probe
3. Kubernetes —É–¥–∞–ª—è–µ—Ç pod –∏–∑ endpoints (~5-10—Å)
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥—Ä–µ–Ω–∞–∂–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
5. SIGTERM –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è preStop
6. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

Admission Controllers –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫
------------------------------------------

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è PodSecurityPolicy –≤ Kubernetes v1.25, Admission Controllers —Å—Ç–∞–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.

### 85. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ OPA Gatekeeper –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫

```yaml
apiVersion: templates.gatekeeper.sh/v1
kind: ConstraintTemplate
metadata:
  name: k8srequiredlabels
spec:
  crd:
    spec:
      names:
        kind: K8sRequiredLabels
      validation:
        openAPIV3Schema:
          properties:
            labels:
              type: array
              items:
                type: string
  targets:
    - target: admission.k8s.gatekeeper.sh
      rego: |
        package k8srequiredlabels
        
        violation[{"msg": msg, "details": {"missing_labels": missing}}] {
          provided := {label | input.review.object.metadata.labels[label]}
          required := {label | label := input.parameters.labels[_]}
          missing := required - provided
          count(missing) > 0
          msg := sprintf("–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∫–∏: %v", [missing])
        }
---
apiVersion: constraints.gatekeeper.sh/v1beta1
kind: K8sRequiredLabels
metadata:
  name: pod-required-labels
spec:
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
  parameters:
    labels:
      - "app.kubernetes.io/name"
      - "app.kubernetes.io/version"
      - "environment"
```

### 86. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Validating Webhooks

```yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: pod-validator
webhooks:
- name: validate.pods.example.com
  admissionReviewVersions: ["v1"]
  clientConfig:
    service:
      name: pod-validator
      namespace: validators
      path: "/validate"
    caBundle: <base64-encoded-ca-cert>
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["pods"]
  failurePolicy: Fail
  sideEffects: None
```

### 87. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Mutating Webhooks –¥–ª—è –∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: pod-mutator
webhooks:
- name: mutate.pods.example.com
  admissionReviewVersions: ["v1"]
  clientConfig:
    service:
      name: pod-mutator
      namespace: mutators
      path: "/mutate"
  rules:
  - operations: ["CREATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["pods"]
  sideEffects: None
```

**–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –º—É—Ç–∞—Ü–∏–∏:**

* –í–Ω–µ–¥—Ä–µ–Ω–∏–µ sidecar –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫/–∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ security contexts
* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤
* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ init –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### 88. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Kyverno –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–ª–∏—Ç–∏–∫

**Kyverno** ‚Äî –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ OPA Gatekeeper —Å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ YAML-–ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ (–±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—á–∏—Ç—å —è–∑—ã–∫ Rego).

```yaml
apiVersion: kyverno.io/v1
kind: ClusterPolicy
metadata:
  name: require-labels
spec:
  validationFailureAction: enforce
  background: true
  rules:
  - name: check-for-labels
    match:
      any:
      - resources:
          kinds:
          - Pod
    validate:
      message: "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∫–∏: app.kubernetes.io/name –∏ environment"
      pattern:
        metadata:
          labels:
            app.kubernetes.io/name: "?*"
            environment: "?*"
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–≤–∏–∂–∫–æ–≤:**

| –§—É–Ω–∫—Ü–∏—è | OPA Gatekeeper | Kyverno | PSA (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) |
|---------|----------------|---------|------------------|
| –Ø–∑—ã–∫ –ø–æ–ª–∏—Ç–∏–∫ | Rego | YAML | Labels –Ω–∞ namespace |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è | –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è |
| –ì–∏–±–∫–æ—Å—Ç—å | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | –°—Ä–µ–¥–Ω—è—è | –ë–∞–∑–æ–≤–∞—è |
| –ú—É—Ç–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ | ‚úÖ | ‚úÖ | ‚ùå |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ | ‚ùå | ‚úÖ | ‚ùå |
| –õ—É—á—à–µ –¥–ª—è | –°–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ | –ü—Ä–æ—Å—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ | Pod security |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–Ω–∏—Ç–µ —Å PSA –¥–ª—è –±–∞–∑–æ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ pod'–æ–≤, –¥–æ–±–∞–≤—å—Ç–µ Kyverno –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ OPA Gatekeeper —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.

–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–≤–∞—Ä–∏–π–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
------------------------------------------------

### 89. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Velero –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –∫–ª–∞—Å—Ç–µ—Ä–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Velero
velero install \
  --provider aws \
  --bucket kubernetes-backups \
  --backup-location-config region=us-east-1 \
  --snapshot-location-config region=us-east-1 \
  --secret-file ./credentials-velero

# –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
velero schedule create daily-backup \
  --schedule="0 2 * * *" \
  --include-namespaces production,staging \
  --ttl 720h
```

**–†–µ—Å—É—Ä—Å Velero backup:**

```yaml
apiVersion: velero.io/v1
kind: Backup
metadata:
  name: production-backup
spec:
  includedNamespaces:
  - production
  includedResources:
  - '*'
  storageLocation: default
  volumeSnapshotLocations:
  - default
  ttl: 720h0m0s
```

### 90. –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ etcd —Å–Ω—ç–ø—à–æ—Ç–æ–≤

```bash
# –°–æ–∑–¥–∞—Ç—å etcd —Å–Ω—ç–ø—à–æ—Ç
ETCDCTL_API=3 etcdctl snapshot save snapshot.db \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω—ç–ø—à–æ—Ç
ETCDCTL_API=3 etcdctl snapshot status snapshot.db -w table

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Å–Ω—ç–ø—à–æ—Ç–∞
ETCDCTL_API=3 etcdctl snapshot restore snapshot.db \
  --data-dir=/var/lib/etcd-restore
```

### 91. –°–æ–∑–¥–∞–π—Ç–µ Runbook –¥–ª—è –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

```yaml
# disaster-recovery-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: dr-runbook
  namespace: kube-system
data:
  runbook.md: |
    # –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
    
    ## –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ—Ç–µ—Ä—è Control Plane
    1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å etcd –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup
    2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API server
    3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–æ–¥
    4. –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ workloads
    
    ## –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π Namespace
    1. –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö backup'–æ–≤: `velero backup get`
    2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å namespace: `velero restore create --from-backup production-backup`
    3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
    
    ## –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ—É–¥–∞—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
    1. –û—Ç–∫–∞—Ç–∏—Ç—å deployment: `kubectl rollout undo deployment/app`
    2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å rollout: `kubectl rollout status deployment/app`
    3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    
    ## RTO –∏ RPO
    - RTO (Recovery Time Objective): 1 —á–∞—Å
    - RPO (Recovery Point Objective): 24 —á–∞—Å–∞
```

### 92. –†–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–≤–∞—Ä–∏–π–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π DR —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
#!/bin/bash

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π namespace
kubectl create namespace dr-test

# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
kubectl apply -f test-app.yaml -n dr-test

# –°–æ–∑–¥–∞—Ç—å backup
velero backup create dr-test-backup --include-namespaces dr-test --wait

# –£–¥–∞–ª–∏—Ç—å namespace
kubectl delete namespace dr-test

# –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
sleep 30

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
velero restore create dr-test-restore --from-backup dr-test-backup --wait

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
kubectl get all -n dr-test

# –û—á–∏—Å—Ç–∫–∞
velero backup delete dr-test-backup --confirm
kubectl delete namespace dr-test
```

–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
---------------------------------------

### 93. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**HTTP/REST API:**

```yaml
livenessProbe:
  httpGet:
    path: /healthz
    port: 8080
    httpHeaders:
    - name: X-Health-Check
      value: liveness
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
```

**gRPC –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**

```yaml
livenessProbe:
  grpc:
    port: 9090
    service: health.v1.Health  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  initialDelaySeconds: 30
  periodSeconds: 10
```

**TCP Socket:**

```yaml
livenessProbe:
  tcpSocket:
    port: 5432
  initialDelaySeconds: 15
  periodSeconds: 10
```

**–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:**

```yaml
livenessProbe:
  exec:
    command:
    - /bin/sh
    - -c
    - |
      pg_isready -U postgres -d mydb -h localhost
  initialDelaySeconds: 30
  periodSeconds: 10
```

### 94. –†–µ–∞–ª–∏–∑—É–π—Ç–µ Startup Probes –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

```yaml
spec:
  containers:
  - name: slow-app
    startupProbe:
      httpGet:
        path: /healthz
        port: 8080
      failureThreshold: 30  # 30 * 10—Å = 5 –º–∏–Ω—É—Ç –º–∞–∫—Å. –∑–∞–ø—É—Å–∫
      periodSeconds: 10
    
    livenessProbe:
      httpGet:
        path: /healthz
        port: 8080
      periodSeconds: 10
      failureThreshold: 3
    
    readinessProbe:
      httpGet:
        path: /ready
        port: 8080
      periodSeconds: 5
      successThreshold: 1
```

**–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å startup probes:**

* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç–∫–∞–∑—ã liveness probe –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞
* –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ runtime –ø—Ä–æ–≤–µ—Ä–∫–∏
* –õ—É—á—à–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –º–µ–¥–ª–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π (ML –º–æ–¥–µ–ª–∏, –±–æ–ª—å—à–∏–µ –∫–µ—à–∏)

### 95. –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```yaml
# –ü–ª–æ—Ö–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ liveness
livenessProbe:
  httpGet:
    path: /health  # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç database, redis –∏ —Ç.–¥.
  failureThreshold: 1  # –°–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ

# –•–æ—Ä–æ—à–æ: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
livenessProbe:
  httpGet:
    path: /alive  # –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∂–∏–≤ –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å
  periodSeconds: 10
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /ready  # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
  periodSeconds: 5
  failureThreshold: 2
  successThreshold: 1
```

**–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ health endpoints:**

```go
// /alive - Liveness probe (–±—ã—Å—Ç—Ä—ã–π, –ø—Ä–æ—Å—Ç–æ–π)
func alive(w http.ResponseWriter, r *http.Request) {
    w.WriteHeader(http.StatusOK)
    w.Write([]byte("OK"))
}

// /ready - Readiness probe (–≤—Å–µ–æ–±—ä–µ–º–ª—é—â–∏–π)
func ready(w http.ResponseWriter, r *http.Request) {
    checks := []func() error{
        checkDatabase,
        checkRedis,
        checkQueue,
    }
    
    for _, check := range checks {
        if err := check(); err != nil {
            w.WriteHeader(http.StatusServiceUnavailable)
            w.Write([]byte(err.Error()))
            return
        }
    }
    
    w.WriteHeader(http.StatusOK)
    w.Write([]byte("Ready"))
}
```

–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
------------------------------------

### 96. –û—à–∏–±–∫–∏ ImagePullBackOff

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑–∞
kubectl describe pod pod-name | grep -A 10 Events

# –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# 1. –û–±—Ä–∞–∑ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
docker pull myregistry/app:v1.0.0

# 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
kubectl get secret registry-credentials -o yaml

# 3. Rate limiting (Docker Hub)
kubectl describe pod pod-name | grep "rate limit"

# –†–µ—à–µ–Ω–∏—è:
# - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å imagePullSecrets
# - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π registry
# - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å image mirror/cache
```

### 97. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Ç–ª–∞–¥–∫–∏ CrashLoopBackOff

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
kubectl logs pod-name --previous

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å exit code
kubectl get pod pod-name -o jsonpath='{.status.containerStatuses[0].lastState.terminated}'

# –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ exit –∫–æ–¥—ã:
# 0: –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
# 1: –û—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# 137: SIGKILL (OOMKilled)
# 143: SIGTERM (Graceful shutdown)

# –û—Ç–ª–∞–¥–∫–∞ —Å ephemeral –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
kubectl debug -it pod-name --image=busybox --target=app

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl describe pod pod-name | grep -A 5 Limits
```

### 98. Pending Pod'—ã - –ø—Ä–æ–±–ª–µ–º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á–µ–º—É pod pending
kubectl describe pod pod-name

# –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# 1. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl describe nodes | grep -A 5 "Allocated resources"

# 2. –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ node selector
kubectl get nodes --show-labels
kubectl get pod pod-name -o yaml | grep -A 5 nodeSelector

# 3. Taints –∏ tolerations
kubectl describe node node-name | grep Taints
kubectl get pod pod-name -o yaml | grep -A 5 tolerations

# 4. Pod affinity/anti-affinity
kubectl get pod pod-name -o yaml | grep -A 10 affinity

# 5. PVC –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω
kubectl get pvc
```

### 99. –ü—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Service

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–∏—Å–æ–º
kubectl run test-pod --rm -it --image=nicolaka/netshoot -- /bin/bash

# –í–Ω—É—Ç—Ä–∏ pod'–∞:
nslookup my-service.my-namespace.svc.cluster.local
curl http://my-service:80

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å endpoints —Å–µ—Ä–≤–∏—Å–∞
kubectl get endpoints my-service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –º–µ—Ç–æ–∫ pod'–∞ —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–∏—Å–∞
kubectl get pod pod-name --show-labels
kubectl get service my-service -o yaml | grep -A 5 selector

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏
kubectl get networkpolicy -A
kubectl describe networkpolicy my-policy
```

### 100. –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ / OOMKilled

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
kubectl top pod pod-name

# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± OOM
kubectl describe pod pod-name | grep -i oom

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏
kubectl get pod pod-name -o jsonpath='{.spec.containers[*].resources}'

# –†–µ—à–µ–Ω–∏—è:
# 1. –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏
# 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPA –¥–ª—è right-sizing
# 4. –í–∫–ª—é—á–∏—Ç—å memory profiling

# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫ –ø–∞–º—è—Ç–∏
kubectl top pod pod-name --containers
```

### 101. –ü—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è DNS

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å DNS –∏–∑ pod'–∞
kubectl run -it --rm debug --image=busybox --restart=Never -- nslookup kubernetes.default

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CoreDNS pod'—ã
kubectl get pods -n kube-system -l k8s-app=kube-dns

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ CoreDNS
kubectl logs -n kube-system -l k8s-app=kube-dns --tail=100

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ CoreDNS
kubectl get configmap coredns -n kube-system -o yaml

# –ß–∞—Å—Ç—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å CoreDNS
kubectl rollout restart deployment coredns -n kube-system

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS –Ω–∞ –Ω–æ–¥–µ
kubectl get nodes -o wide
```

–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
---------------------------------------

### 102. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã Kubernetes

**‚ùå –ó–∞–ø—É—Å–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ Kubernetes (–±–µ–∑ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã)**

```yaml
# –ù–µ –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –¥–ª—è production –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç:
# - –ì–ª—É–±–æ–∫–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –≤ Kubernetes
# - –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä backup/restore
# - StatefulSet —Å persistent volumes
# - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞
# –õ—É—á—à–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ managed —Å–µ—Ä–≤–∏—Å—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (RDS, CloudSQL –∏ —Ç.–¥.)
```

**‚ùå –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Host Paths**

```yaml
# –û–ø–∞—Å–Ω—ã–π –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω
volumes:
- name: host-data
  hostPath:
    path: /var/data  # –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç pod –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–¥–µ, —Ä–∏—Å–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```

**‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `:latest` —Ç–µ–≥–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**

```yaml
# –ü–ª–æ—Ö–æ: –ù–µ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
image: nginx:latest

# –•–æ—Ä–æ—à–æ: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏
image: nginx:1.25.3
# –õ—É—á—à–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ digest
image: nginx@sha256:4c0fdaa8b6341bfdeca5f18f7837462c80cff90527ee35ef185571e1c327beac
```

**‚ùå –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤**

```yaml
# –ü–ª–æ—Ö–æ: –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞
containers:
- name: app
  image: app:v1
  # –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç resources

# –•–æ—Ä–æ—à–æ: –í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ requests –∏ limits
containers:
- name: app
  image: app:v1
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
```

**‚ùå –°–µ–∫—Ä–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤–∏–¥–Ω—ã –≤ describe)**

```yaml
# –ü–ª–æ—Ö–æ: –õ—é–±–æ–π —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ describe –≤–∏–¥–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã
env:
- name: API_KEY
  value: "super-secret-key-12345"

# –•–æ—Ä–æ—à–æ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ secretKeyRef
env:
- name: API_KEY
  valueFrom:
    secretKeyRef:
      name: api-secrets
      key: api-key

# –õ—É—á—à–µ: –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ volume (–±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)
volumeMounts:
- name: secrets
  mountPath: /etc/secrets
  readOnly: true
volumes:
- name: secrets
  secret:
    secretName: api-secrets
```

**‚ùå –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫**

```yaml
# –ü–ª–æ—Ö–æ: –†–∞—Å—Ç—Ä–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
replicas: 50  # –î–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å

# –•–æ—Ä–æ—à–æ: Right-size –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HPA
replicas: 2
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
spec:
  minReplicas: 2
  maxReplicas: 10
```

**‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ Security Contexts**

```yaml
# –ü–ª–æ—Ö–æ: –ó–∞–ø—É—Å–∫ –æ—Ç root
containers:
- name: app
  image: app:v1

# –•–æ—Ä–æ—à–æ: –Ø–≤–Ω—ã–π security context
containers:
- name: app
  image: app:v1
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    readOnlyRootFilesystem: true
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]
```

**‚ùå –û–¥–∏–Ω –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–π Namespace**

```yaml
# –ü–ª–æ—Ö–æ: –í—Å—ë –≤ default namespace
apiVersion: v1
kind: Namespace
metadata:
  name: default  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ default –¥–ª—è –≤—Å–µ–≥–æ

# –•–æ—Ä–æ—à–æ: –õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
---
apiVersion: v1
kind: Namespace
metadata:
  name: production
---
apiVersion: v1
kind: Namespace
metadata:
  name: staging
```

**‚ùå –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

```yaml
# –ü–ª–æ—Ö–æ: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ deployment
env:
- name: DATABASE_URL
  value: "postgres://prod-db.example.com:5432/db"

# –•–æ—Ä–æ—à–æ: –í–Ω–µ—à–Ω—è—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
env:
- name: DATABASE_URL
  valueFrom:
    configMapKeyRef:
      name: app-config
      key: database-url
```

**‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**

```yaml
# –ü–ª–æ—Ö–æ: –ù–µ—Ç probes
containers:
- name: app
  image: app:v1

# –•–æ—Ä–æ—à–æ: –í—Å–µ–æ–±—ä–µ–º–ª—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
containers:
- name: app
  image: app:v1
  livenessProbe:
    httpGet:
      path: /healthz
      port: 8080
    periodSeconds: 10
  readinessProbe:
    httpGet:
      path: /ready
      port: 8080
    periodSeconds: 5
```

### 104. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö kubectl –∫–æ–º–∞–Ω–¥

```bash
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è–º–∏
kubectl apply -f deployment.yaml
kubectl rollout status deployment/app
kubectl rollout undo deployment/app
kubectl scale deployment app --replicas=5

# –û—Ç–ª–∞–¥–∫–∞
kubectl describe pod pod-name
kubectl logs pod-name -f
kubectl logs pod-name --previous
kubectl exec -it pod-name -- /bin/bash
kubectl debug -it pod-name --image=busybox

# –ò–Ω—Å–ø–µ–∫—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
kubectl get all -n namespace
kubectl top pods
kubectl top nodes
kubectl get events --sort-by='.lastTimestamp'

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
kubectl create configmap app-config --from-file=config.yaml
kubectl create secret generic db-creds --from-literal=password=secret
kubectl get configmap app-config -o yaml

# –°–µ—Ç–∏
kubectl port-forward svc/app 8080:80
kubectl get endpoints
kubectl get ingress

# RBAC
kubectl auth can-i create deployments
kubectl auth can-i --list
kubectl get rolebindings

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ
kubectl cluster-info
kubectl get nodes -o wide
kubectl api-resources
kubectl api-versions
```

### 105. –ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ |
|------------|------------|-----------|
| **k9s** | Terminal UI –¥–ª—è K8s | `brew install k9s` |
| **stern** | Multi-pod log tailing | `brew install stern` |
| **kubectx/kubens** | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞/namespace | `brew install kubectx` |
| **kustomize** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π | –í—Å—Ç—Ä–æ–µ–Ω –≤ kubectl |
| **helm** | –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ | `brew install helm` |
| **krew** | –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤ kubectl | [krew.sigs.k8s.io](https://krew.sigs.k8s.io) |
| **kubeconform** | YAML –≤–∞–ª–∏–¥–∞—Ü–∏—è (–∑–∞–º–µ–Ω–∞ kubeval) | `brew install kubeconform` |
| **kube-linter** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ | `brew install kube-linter` |
| **velero** | Backup/restore | [velero.io](https://velero.io) |
| **k6** | –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `brew install k6` |
| **kubescape** | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | `brew install kubescape` |
| **Lens** | Desktop GUI | [k8slens.dev](https://k8slens.dev) |

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
-----------------------------------

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

1.  **kubeconform**: –í–∞–ª–∏–¥–∞—Ü–∏—è YAML –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ Kubernetes —Å—Ö–µ–º (–±—ã—Å—Ç—Ä–µ–µ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–µ–µ, —á–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏–π kubeval)
2.  **kube-linter**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫
3.  **Datree**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
4.  **OPA/Gatekeeper**: –í–∞–ª–∏–¥–∞—Ü–∏—è policy-as-code
5.  **Polaris**: –ü—Ä–æ–≤–µ—Ä–∫–∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
6.  **kubent**: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö API
7.  **Kyverno**: –ü—Ä–æ—Å—Ç—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ YAML (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ OPA)

**–ü—Ä–∏–º–µ—Ä CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

```yaml
# .github/workflows/validate.yaml
name: Validate Kubernetes Manifests
on: [pull_request]
jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Install kubeconform
      run: |
        curl -L https://github.com/yannh/kubeconform/releases/latest/download/kubeconform-linux-amd64.tar.gz | tar xz
        sudo mv kubeconform /usr/local/bin/
    
    - name: Validate schemas
      run: kubeconform -strict -summary -output json kubernetes/
    
    - name: Check best practices
      run: kube-linter lint kubernetes/
    
    - name: Detect deprecated APIs
      run: kubent -f kubernetes/
```

**–ü–æ—á–µ–º—É kubeconform –≤–º–µ—Å—Ç–æ kubeval:**

* ‚ö° **–ë—ã—Å—Ç—Ä–µ–µ**: –í 10-20 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
* üîÑ **–ê–∫—Ç—É–∞–ª—å–Ω—ã–π**: –ê–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (kubeval –∑–∞–±—Ä–æ—à–µ–Ω —Å 2021 –≥–æ–¥–∞)
* üì¶ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã Kubernetes –∏ CRD
* üéØ **–õ—É—á—à–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OpenAPI v3 –∏ Custom Resource Definitions
* üîß **–ì–∏–±–∫–æ—Å—Ç—å**: –ë–æ–ª—å—à–µ –æ–ø—Ü–∏–π –≤—ã–≤–æ–¥–∞ (JSON, TAP, JUnit)

–ó–∞–∫–ª—é—á–µ–Ω–∏–µ
----------

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Kubernetes –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –æ–±—ã–¥–µ–Ω–Ω–æ–π, –Ω–æ —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ –Ω–∞–¥—ë–∂–Ω—ã—Ö —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π. –°–ª–µ–¥—É—è —ç—Ç–∏–º –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º, –≤—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ:

*   **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ**: –ß–∏—Å—Ç—ã–µ, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
*   **–ù–∞–¥—ë–∂–Ω—ã–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è, –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª–∞ anti-affinity
*   **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –æ—Ç root, —Å–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
*   **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

**–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:**

1.  –í—Å–µ–≥–¥–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–π—Ç–µ –≤–∞—à–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2.  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (Deployments, StatefulSets) –≤–º–µ—Å—Ç–æ –≥–æ–ª—ã—Ö Pod'–æ–≤
3.  –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ resource requests –∏ limits –Ω–∞ –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
4.  –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è –≤—Å–µ—Ö workloads
5.  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∫–∏
6.  –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

–ù–∞—á–Ω–∏—Ç–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å–µ–≥–æ–¥–Ω—è, –∏ –≤–∞—à–µ –±—É–¥—É—â–µ–µ —è (–∏ –≤–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞) —Å–∫–∞–∂—É—Ç –≤–∞–º —Å–ø–∞—Å–∏–±–æ, –∫–æ–≥–¥–∞ –æ—Ç–ª–∞–¥–∫–∞ –≤ 3 —á–∞—Å–∞ –Ω–æ—á–∏ —Å—Ç–∞–Ω–µ—Ç —Ä–µ–¥–∫–∏–º —è–≤–ª–µ–Ω–∏–µ–º.

**–°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏:**

* [Best Practices for Configuration](https://jamesdefabia.github.io/docs/user-guide/config-best-practices/)
* [Kubernetes Configuration Best Practices: The Ultimate Guide for 2025](https://kubezilla.io/kubernetes-configuration-best-practices-the-ultimate-guide-for-2025/)
* [17 Kubernetes Best Practices Every Developer Should Know](https://spacelift.io/blog/kubernetes-best-practices)
* [Kubernetes Production Readiness Checklist](https://www.ecloudcontrol.com/kubernetes-production-readiness-checklist/)
* [Kubernetes Security Best Practices](https://kubernetes.io/docs/concepts/security/security-checklist/)
* [Monitoring and Observability in Kubernetes](https://www.cncf.io/blog/2023/10/11/monitoring-and-observability-in-kubernetes/)
* [Kubernetes Networking Best Practices](https://kubernetes.io/docs/concepts/services-networking/)
* [Managing StatefulSets in Production](https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/)
* [GitOps Best Practices with ArgoCD](https://argo-cd.readthedocs.io/en/stable/user-guide/best_practices/)
* [Helm Best Practices Guide](https://helm.sh/docs/chart_best_practices/)
* [Kubernetes Cost Optimization Strategies](https://www.kubecost.com/kubernetes-best-practices/)
* [Multi-Tenancy in Kubernetes](https://kubernetes.io/docs/concepts/security/multi-tenancy/)
* [Service Mesh Comparison: Istio vs Linkerd](https://linkerd.io/2021/05/27/linkerd-vs-istio/)
* [Kubernetes Autoscaling Deep Dive](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/)
* [Troubleshooting Kubernetes Applications](https://kubernetes.io/docs/tasks/debug/)
* [Implementing Kubernetes Pod Security Standards](https://dev.to/thenjdevopsguy/implementing-kubernetes-pod-security-standards-4aco)
